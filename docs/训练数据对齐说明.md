# è®­ç»ƒæ•°æ®å¯¹é½è¯´æ˜Ž

**æ›´æ–°æ—¶é—´**: 2026-01-23

---

## ðŸ“Š ä¸€ã€æ•°æ®å¯¹é½æµç¨‹

### 1.1 æ•°æ®æ¥æº

1. **Kçº¿æ•°æ®ï¼ˆ1åˆ†é’Ÿï¼‰**: ä»ŽTiger APIèŽ·å–
2. **Tickæ•°æ®**: ä»ŽDEMOè´¦æˆ·é‡‡é›†çš„çœŸå®žTickæ•°æ®æ–‡ä»¶
3. **æŠ€æœ¯æŒ‡æ ‡**: åŸºäºŽKçº¿æ•°æ®è®¡ç®—ï¼ˆRSIã€ATRã€å¸ƒæž—å¸¦ç­‰ï¼‰

### 1.2 å¯¹é½è¿‡ç¨‹

```
Kçº¿æ•°æ®ï¼ˆ1åˆ†é’Ÿï¼‰
    â†“
æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ï¼ˆRSIã€ATRã€å¸ƒæž—å¸¦ï¼‰
    â†“
Tickæ•°æ®åŒ¹é…ï¼ˆKçº¿æ—¶é—´ Â± 30ç§’çª—å£ï¼‰
    â†“
ç‰¹å¾æå–ï¼ˆ18ç»´ï¼‰
    â†“
åºåˆ—æž„å»ºï¼ˆseq_lengthä¸ªæ—¶é—´æ­¥ï¼‰
    â†“
è®­ç»ƒæ ·æœ¬ (seq_length, 18)
```

---

## ðŸ”§ äºŒã€è¯¦ç»†å¯¹é½æ­¥éª¤

### 2.1 æ­¥éª¤1ï¼šèŽ·å–Kçº¿æ•°æ®

**æ•°æ®**: 1åˆ†é’ŸKçº¿ï¼ˆOHLCVï¼‰
- `open`: å¼€ç›˜ä»·
- `high`: æœ€é«˜ä»·
- `low`: æœ€ä½Žä»·
- `close`: æ”¶ç›˜ä»·
- `volume`: æˆäº¤é‡

**æ—¶é—´**: æ¯ä¸ªKçº¿ä»£è¡¨1åˆ†é’Ÿçš„æ—¶é—´æ®µ

### 2.2 æ­¥éª¤2ï¼šåŠ è½½Tickæ•°æ®

**æ•°æ®æ¥æº**: `/home/cx/trading_data/ticks/SIL2603_ticks_*.csv`

**Tickæ•°æ®åˆ—**:
- `identifier`: åˆçº¦ä»£ç 
- `index`: Tickç´¢å¼•
- `price`: Tickä»·æ ¼ï¼ˆçœŸå®žæˆäº¤ä»·æ ¼ï¼‰
- `volume`: Tickæˆäº¤é‡
- `time`: æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
- `datetime`: æ—¥æœŸæ—¶é—´

### 2.3 æ­¥éª¤3ï¼šè®¡ç®—æŠ€æœ¯æŒ‡æ ‡

**åŸºäºŽKçº¿æ•°æ®è®¡ç®—**:
- **RSI(14)**: ç›¸å¯¹å¼ºå¼±æŒ‡æ ‡
- **ATR(14)**: å¹³å‡çœŸå®žæ³¢å¹…
- **å¸ƒæž—å¸¦(20)**: ä¸Šè½¨ã€ä¸­è½¨ã€ä¸‹è½¨

### 2.4 æ­¥éª¤4ï¼šTickæ•°æ®å¯¹é½

**å¯¹é½æ–¹æ³•**:
- å¯¹äºŽæ¯ä¸ªKçº¿æ—¶é—´ç‚¹ï¼Œæ‰¾åˆ°è¯¥æ—¶é—´çª—å£å†…çš„Tickæ•°æ®
- **æ—¶é—´çª—å£**: Kçº¿æ—¶é—´ Â± 30ç§’
- **ä½¿ç”¨æœ€æ–°Tickä»·æ ¼**: è¯¥çª—å£å†…æœ€åŽä¸€ä¸ªTickçš„ä»·æ ¼

**Tickç‰¹å¾è®¡ç®—**:
```python
# æ—¶é—´çª—å£
time_window_start = kline_time - 30ç§’
time_window_end = kline_time + 30ç§’

# ç­›é€‰Tickæ•°æ®
ticks_in_window = tick_data[(tick_data['datetime'] >= time_window_start) & 
                            (tick_data['datetime'] <= time_window_end)]

# è®¡ç®—Tickç‰¹å¾
tick_price = ticks_in_window['price'].iloc[-1]  # æœ€æ–°Tickä»·æ ¼
tick_price_change = (tick_price - kline_price) / kline_price
tick_volatility = ticks_in_window['price'].std() / kline_price
tick_volume = ticks_in_window['volume'].sum()
tick_count = len(ticks_in_window)
```

### 2.5 æ­¥éª¤5ï¼šç‰¹å¾æå–ï¼ˆ18ç»´ï¼‰

**ç‰¹å¾åˆ—è¡¨**:
1. `price_current` - Kçº¿ä»·æ ¼
2. `tick_price` - çœŸå®žTickä»·æ ¼
3. `tick_price_change` - Tickä»·æ ¼å˜åŒ–
4. `tick_volatility` - Tickæ³¢åŠ¨çŽ‡
5. `tick_volume` - Tickæˆäº¤é‡
6. `tick_count` - Tickæ•°é‡
7. `tick_buy_sell_ratio` - Tickä¹°å–æ¯”ä¾‹
8. `atr` - å¹³å‡çœŸå®žæ³¢å¹…
9. `rsi_1m` - 1åˆ†é’ŸRSI
10. `rsi_5m` - 5åˆ†é’ŸRSI
11. `grid_lower` - ç½‘æ ¼ä¸‹è½¨
12. `grid_upper` - ç½‘æ ¼ä¸Šè½¨
13. `boll_upper` - å¸ƒæž—å¸¦ä¸Šè½¨
14. `boll_mid` - å¸ƒæž—å¸¦ä¸­è½¨
15. `boll_lower` - å¸ƒæž—å¸¦ä¸‹è½¨
16. `boll_position` - å¸ƒæž—å¸¦ä½ç½®
17. `volatility` - æ³¢åŠ¨çŽ‡
18. `volume_1m` - 1åˆ†é’Ÿæˆäº¤é‡

### 2.6 æ­¥éª¤6ï¼šåºåˆ—æž„å»º

**åºåˆ—é•¿åº¦**: `seq_length`ï¼ˆé»˜è®¤10ï¼Œå»ºè®®30-60ï¼‰

**æž„å»ºæ–¹æ³•**:
```python
# å¯¹äºŽå½“å‰æ—¶é—´ç‚¹ i
start_idx = max(0, i - seq_length + 1)
sequence = df.iloc[start_idx:i+1]  # å–æœ€è¿‘seq_lengthä¸ªæ—¶é—´æ­¥

# æ¯ä¸ªæ—¶é—´æ­¥æå–18ç»´ç‰¹å¾
features_sequence = []
for _, row in sequence.iterrows():
    features = extract_features(row)  # 18ç»´
    features_sequence.append(features)

# æœ€ç»ˆå½¢çŠ¶: (seq_length, 18)
X = np.array(features_sequence)
```

**ç¤ºä¾‹**ï¼ˆseq_length=10ï¼‰:
```
æ—¶é—´ç‚¹ç´¢å¼•: 30
åºåˆ—èµ·å§‹: 21
åºåˆ—ç»“æŸ: 30
åºåˆ—åŒ…å«: [21, 22, 23, 24, 25, 26, 27, 28, 29, 30]
```

---

## ðŸ“ˆ ä¸‰ã€åºåˆ—é•¿åº¦åˆ†æž

### 3.1 ä¸ºä»€ä¹ˆåºåˆ—é•¿åº¦10å¤ªçŸ­ï¼Ÿ

**é—®é¢˜**:
- æ— æ³•è¦†ç›–å®Œæ•´çš„æŠ€æœ¯æŒ‡æ ‡å‘¨æœŸ
- æ— æ³•è¯†åˆ«å¤æ‚çš„ä»·æ ¼æ¨¡å¼
- æ— æ³•å……åˆ†åˆ©ç”¨åŽ†å²æˆäº¤ä¿¡æ¯

**æŠ€æœ¯æŒ‡æ ‡å‘¨æœŸ**:
- RSI(14): éœ€è¦14ä¸ªæ—¶é—´æ­¥
- å¸ƒæž—å¸¦(20): éœ€è¦20ä¸ªæ—¶é—´æ­¥
- ATR(14): éœ€è¦14ä¸ªæ—¶é—´æ­¥

**ç»“è®º**: è‡³å°‘éœ€è¦**20-30ä¸ªæ—¶é—´æ­¥**æ‰èƒ½è¦†ç›–ä¸»è¦æŠ€æœ¯æŒ‡æ ‡

### 3.2 å»ºè®®çš„åºåˆ—é•¿åº¦

**æœ€å°æŽ¨è**: **30ä¸ªæ—¶é—´æ­¥**ï¼ˆ30åˆ†é’Ÿï¼‰
- è¦†ç›–RSIå’Œå¸ƒæž—å¸¦çš„å®Œæ•´å‘¨æœŸ
- èƒ½å¤Ÿè¯†åˆ«åŸºæœ¬çš„ä»·æ ¼æ¨¡å¼

**æŽ¨è**: **40-50ä¸ªæ—¶é—´æ­¥**ï¼ˆ40-50åˆ†é’Ÿï¼‰
- å¹³è¡¡æ€§èƒ½å’Œè®¡ç®—æˆæœ¬
- èƒ½å¤Ÿè¯†åˆ«æ›´å¤æ‚çš„ä»·æ ¼æ¨¡å¼

**ç†æƒ³**: **50-60ä¸ªæ—¶é—´æ­¥**ï¼ˆ50-60åˆ†é’Ÿï¼‰
- åŒ…å«æ›´å¤šçš„åŽ†å²æˆäº¤ä¿¡æ¯
- æ›´å¥½åœ°ç†è§£å¸‚åœºè¶‹åŠ¿

### 3.3 å¦‚ä½•ç¡®å®šåˆé€‚çš„åºåˆ—é•¿åº¦ï¼Ÿ

**æ–¹æ³•**: åŠ¨æ€æµ‹è¯•
1. æµ‹è¯•ä¸åŒåºåˆ—é•¿åº¦ï¼ˆ10, 20, 30, 40, 50, 60ï¼‰
2. è§‚å¯Ÿæ€§èƒ½å˜åŒ–ï¼ˆå‡†ç¡®çŽ‡ã€æ”¶ç›ŠçŽ‡ï¼‰
3. æ‰¾åˆ°æ”¶æ•›ç‚¹ï¼ˆæ€§èƒ½ä¸å†æ˜¾è‘—æå‡ï¼‰

**æµ‹è¯•è„šæœ¬**: `scripts/analysis/sequence_length_tester.py`

---

## âœ… å››ã€æ€»ç»“

### 4.1 æ•°æ®å¯¹é½æµç¨‹

1. âœ… Kçº¿æ•°æ®ï¼ˆ1åˆ†é’Ÿï¼‰â†’ åŸºç¡€æ—¶é—´åºåˆ—
2. âœ… Tickæ•°æ®å¯¹é½ â†’ æ¯ä¸ªKçº¿æ—¶é—´ç‚¹åŒ¹é…Tickæ•°æ®ï¼ˆÂ±30ç§’çª—å£ï¼‰
3. âœ… æŠ€æœ¯æŒ‡æ ‡è®¡ç®— â†’ åŸºäºŽKçº¿æ•°æ®è®¡ç®—RSIã€ATRã€å¸ƒæž—å¸¦
4. âœ… ç‰¹å¾æå– â†’ 18ç»´ç‰¹å¾å‘é‡ï¼ˆåŒ…å«çœŸå®žTickæ•°æ®ï¼‰
5. âœ… åºåˆ—æž„å»º â†’ å–æœ€è¿‘seq_lengthä¸ªæ—¶é—´æ­¥çš„ç‰¹å¾
6. âœ… æ ‡ç­¾ç”Ÿæˆ â†’ åŸºäºŽæœªæ¥10æ­¥çš„ä»·æ ¼å˜åŒ–è®¡ç®—åŠ¨ä½œæ ‡ç­¾

### 4.2 åºåˆ—é•¿åº¦å»ºè®®

- **å½“å‰**: 10ä¸ªæ—¶é—´æ­¥ï¼ˆå¤ªçŸ­ï¼‰
- **æœ€å°æŽ¨è**: 30ä¸ªæ—¶é—´æ­¥
- **æŽ¨è**: 40-50ä¸ªæ—¶é—´æ­¥
- **ç†æƒ³**: 50-60ä¸ªæ—¶é—´æ­¥

### 4.3 ä¸‹ä¸€æ­¥

1. âœ… è¿è¡Œåºåˆ—é•¿åº¦æµ‹è¯•ï¼ˆ10, 20, 30, 40, 50, 60ï¼‰
2. âœ… åˆ†æžæµ‹è¯•ç»“æžœï¼Œæ‰¾åˆ°æœ€ä¼˜åºåˆ—é•¿åº¦
3. âœ… æ›´æ–°é»˜è®¤åºåˆ—é•¿åº¦
4. âœ… è€ƒè™‘å®žçŽ°åŠ¨æ€åºåˆ—é•¿åº¦ï¼ˆæ ¹æ®å¸‚åœºæ¡ä»¶è°ƒæ•´ï¼‰

---

**çŠ¶æ€**: æ•°æ®å¯¹é½æµç¨‹å·²è¯´æ˜Žï¼Œåºåˆ—é•¿åº¦åˆ†æžå·²å®Œæˆ

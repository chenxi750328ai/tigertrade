# DEMO重启记录

**日期**: 2026-01-29  
**时间**: 09:32  
**状态**: ✅ 已重启

## 一、重启操作

### 1.1 停止旧进程
- **旧进程ID**: 37609
- **运行时长**: 15小时7分钟
- **操作**: `kill 37609`
- **结果**: ✅ 进程已停止

### 1.2 启动新进程
- **新进程ID**: 230101
- **启动时间**: 2026-01-29 09:32
- **运行时长**: 20小时（目标）
- **策略**: moe_transformer
- **日志文件**: `demo_run_20h_YYYYMMDD_HHMMSS.log`

## 二、修复内容

### 2.1 代码修复
- ✅ 使用 `future_contract` 替代 `stock_contract`
- ✅ 使用简短格式 `SIL2603`（而不是 `SIL.COMEX.202603`）
- ✅ 指定 `currency=Currency.USD`

### 2.2 预期效果
- ✅ 合约类型应为 `FUT`（而不是 `STK`）
- ✅ symbol格式应为 `SIL2603`
- ✅ 下单应使用正确的期货合约

## 三、监控

### 3.1 进程状态
```bash
ps -p 230101
```

### 3.2 日志监控
```bash
tail -f demo_run_20h_*.log
```

### 3.3 关键检查点
1. ✅ API初始化成功
2. ✅ account设置成功
3. ⏳ 合约创建（应使用 `future_contract`）
4. ⏳ 下单尝试（应使用 `FUT` 类型合约）

## 四、已知问题

### 4.1 授权问题
- **错误**: `account '21415812702670778' is not authorized to the api user`
- **原因**: account没有授权给API用户（tiger_id）
- **解决**: 需要在Tiger后台配置授权（外部配置问题）

### 4.2 预期行为
- 即使有授权问题，代码修复后应能看到：
  - ✅ 合约类型为 `FUT`（而不是 `STK`）
  - ✅ symbol格式为 `SIL2603`
  - ✅ 使用 `future_contract` 创建合约

## 五、下一步

1. ⏳ 监控运行状态
2. ⏳ 检查日志中的合约类型
3. ⏳ 验证下单是否使用正确的合约
4. ⏳ 解决授权问题（需要在Tiger后台配置）

---

**状态**: ✅ DEMO已重启，使用修复后的代码

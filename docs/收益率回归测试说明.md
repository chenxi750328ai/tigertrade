# 收益率回归测试说明

**创建时间**: 2026-01-23  
**状态**: 测试正在运行中

---

## 📊 一、测试目标

对比分类方法和收益率回归方法的性能：

1. **分类方法**：只预测动作（买入/卖出/不操作），损失函数优化动作分类准确率
2. **收益率回归方法**：同时预测动作和收益率，损失函数直接优化收益率

---

## 🎯 二、测试指标

### 2.1 传统准确率

**定义**: 预测动作与真实标签匹配的比例

**公式**: `accuracy = (预测动作 == 真实标签) 的数量 / 总样本数`

### 2.2 收益加权准确率（关键指标）

**定义**: 预测动作的实际收益 / 最优动作的最大可能收益

**公式**: `profit_accuracy = 总预测收益 / 总最大可能收益`

**重要性**: 这是更真实的性能指标，直接反映模型的实际交易表现

---

## 🔧 三、测试配置

### 3.1 数据分割

- **训练集**: 80%
- **测试集**: 20%

### 3.2 训练配置

- **序列长度**: 10
- **训练轮次**: 20（快速测试）
- **早停耐心**: 5
- **网格调整训练**: 启用

### 3.3 模型配置

- **模式**: hybrid（计算模式）
- **分类方法**: `predict_profit=False`
- **收益率回归方法**: `predict_profit=True`

---

## 📈 四、预期结果

### 4.1 理论预期

**收益率回归方法应该**：
- ✅ 收益加权准确率更高（直接优化收益目标）
- ✅ 传统准确率可能略低（因为同时优化两个目标）
- ✅ 训练时间可能略长（多了一个预测头）

### 4.2 关键指标

**收益加权准确率**是最重要的指标，因为：
- 它直接反映模型的实际交易表现
- 传统准确率可能虚高（如果总是预测"不操作"）

---

## 📝 五、测试脚本

**脚本位置**: `/home/cx/tigertrade/scripts/analysis/test_profit_regression.py`

**运行方式**:
```bash
cd /home/cx/tigertrade
python scripts/analysis/test_profit_regression.py
```

**日志位置**: `/tmp/profit_regression_test.log`

---

## ✅ 六、监控测试进度

### 6.1 查看测试日志

```bash
tail -f /tmp/profit_regression_test.log
```

### 6.2 检查测试进程

```bash
ps aux | grep test_profit_regression
```

---

## 📊 七、结果分析

测试完成后，结果会保存到：
- `/home/cx/tigertrade/docs/profit_regression_comparison_*.md`

**分析要点**：
1. **收益加权准确率改进**：这是最重要的指标
2. **传统准确率对比**：可能略有下降，但这是可以接受的
3. **训练时间对比**：收益率回归方法可能略慢

---

**状态**: 测试正在运行中，预计30分钟内完成

# tiger1.py é‡æ„æ–¹æ¡ˆ

**å½“å‰çŠ¶æ€**: å•ä½“åº”ç”¨ï¼ŒåŒ…å«æ‰€æœ‰åŠŸèƒ½
**ç›®æ ‡**: é‡æ„ä¸ºæ¨¡å—åŒ–æ¶æ„ï¼Œtiger1.pyä½œä¸ºä¸»ç¨‹åº/é›†æˆå±‚

---

## ğŸ” å½“å‰ tiger1.py åˆ†æ

### åŠŸèƒ½ç»„æˆ
```python
tiger1.py (2800+ è¡Œ)
â”œâ”€â”€ DataCollector (æ•°æ®é‡‡é›†)
â”œâ”€â”€ calculate_indicators (æŒ‡æ ‡è®¡ç®—)
â”œâ”€â”€ judge_market_trend (è¶‹åŠ¿åˆ¤æ–­)
â”œâ”€â”€ grid_trading_strategy (ç½‘æ ¼ç­–ç•¥)
â”œâ”€â”€ boll1m_grid_strategy (BOLLç­–ç•¥)
â”œâ”€â”€ place_tiger_order (ä¸‹å•)
â”œâ”€â”€ check_risk_control (é£é™©æ§åˆ¶)
â”œâ”€â”€ backtest_* (å›æµ‹)
â””â”€â”€ å„ç§è¾…åŠ©å‡½æ•°
```

### é—®é¢˜
1. **å•ä½“æ¶æ„** - æ‰€æœ‰åŠŸèƒ½æ··åœ¨ä¸€èµ·
2. **éš¾ä»¥æµ‹è¯•** - åŠŸèƒ½è€¦åˆä¸¥é‡
3. **éš¾ä»¥æ‰©å±•** - æ·»åŠ æ–°ç­–ç•¥éœ€è¦ä¿®æ”¹ä¸»æ–‡ä»¶
4. **ä¸æ”¯æŒå¹¶è¡Œå¼€å‘** - å¤šäººä¿®æ”¹å®¹æ˜“å†²çª

---

## ğŸ¯ é‡æ„ç›®æ ‡

### tiger1.py åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ

**å®šä½**: **å®ç›˜äº¤æ˜“ä¸»ç¨‹åº** (Live Trading Main Program)

**èŒè´£**:
1. åè°ƒå„ä¸ªæ¨¡å—
2. å®æ—¶æ•°æ®è·å–
3. ç­–ç•¥ä¿¡å·ç”Ÿæˆ
4. è®¢å•æ‰§è¡Œ
5. é£é™©ç›‘æ§
6. çŠ¶æ€è®°å½•

**ä¸åº”è¯¥åŒ…å«**:
- âŒ å…·ä½“çš„ç­–ç•¥é€»è¾‘ï¼ˆåº”è¯¥åœ¨Module 5ï¼‰
- âŒ å¤æ‚çš„æŒ‡æ ‡è®¡ç®—ï¼ˆåº”è¯¥åœ¨Module 2/4ï¼‰
- âŒ å›æµ‹é€»è¾‘ï¼ˆåº”è¯¥åœ¨Module 6ï¼‰

---

## ğŸ—ï¸ é‡æ„åçš„æ¶æ„

### æ–°çš„ tiger1.py (ä¸»ç¨‹åº)

```python
#!/usr/bin/env python3
"""
TigerTrade å®ç›˜äº¤æ˜“ä¸»ç¨‹åº
åè°ƒå„æ¨¡å—ï¼Œæ‰§è¡Œå®æ—¶äº¤æ˜“
"""

from src.data_collector import RealTimeDataCollector
from src.strategies import get_strategy
from src.risk import RiskManager
from src.monitor import TradingMonitor
import config

class LiveTradingSystem:
    """å®ç›˜äº¤æ˜“ç³»ç»Ÿ"""
    
    def __init__(self, strategy_name='transformer'):
        # åˆå§‹åŒ–å„æ¨¡å—
        self.data_collector = RealTimeDataCollector()
        self.strategy = get_strategy(strategy_name)
        self.risk_manager = RiskManager(config.RISK_CONFIG)
        self.monitor = TradingMonitor()
        
    def run(self):
        """ä¸»å¾ªç¯"""
        while True:
            try:
                # 1. è·å–å®æ—¶æ•°æ® (Module 1)
                data = self.data_collector.get_latest_data()
                
                # 2. ç­–ç•¥ä¿¡å· (Module 5)
                signal = self.strategy.generate_signal(data)
                
                # 3. é£é™©æ£€æŸ¥ (Module 7)
                if self.risk_manager.check_signal(signal):
                    
                    # 4. ä¸‹å•
                    order = self.execute_order(signal)
                    
                    # 5. ç›‘æ§å’Œè®°å½• (Module 8)
                    self.monitor.log_trade(order)
                
                # ç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸ
                time.sleep(config.INTERVAL)
                
            except Exception as e:
                self.monitor.log_error(e)
                self.risk_manager.emergency_stop()

if __name__ == '__main__':
    system = LiveTradingSystem(strategy_name='transformer')
    system.run()
```

### æ¨¡å—æ‹†åˆ†

#### åŸ tiger1.py â†’ æ–°æ¶æ„
```
tiger1.py (2800è¡Œ)
    â†“ æ‹†åˆ†
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ src/data_collector/                         â”‚
â”‚   â”œâ”€â”€ realtime_collector.py   (DataCollector)â”‚
â”‚   â”œâ”€â”€ tick_collector.py                     â”‚
â”‚   â””â”€â”€ kline_fetcher.py                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ src/data_processor/                         â”‚
â”‚   â”œâ”€â”€ indicators.py            (calculate_indicators)â”‚
â”‚   â””â”€â”€ trend_analyzer.py       (judge_market_trend)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ src/strategies/                             â”‚
â”‚   â”œâ”€â”€ base.py                  (ç­–ç•¥åŸºç±»)    â”‚
â”‚   â”œâ”€â”€ grid_strategy.py        (grid_trading_strategy)â”‚
â”‚   â”œâ”€â”€ boll_strategy.py        (boll1m_grid_strategy)â”‚
â”‚   â””â”€â”€ transformer_strategy.py (æ–°ç­–ç•¥)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ src/risk/                                   â”‚
â”‚   â”œâ”€â”€ risk_manager.py         (check_risk_control)â”‚
â”‚   â””â”€â”€ stop_loss.py            (compute_stop_loss)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ src/backtest/                               â”‚
â”‚   â””â”€â”€ engine.py               (backtest_*)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ src/monitor/                                â”‚
â”‚   â””â”€â”€ logger.py               (æ—¥å¿—å’Œç›‘æ§)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘ æ‰€æœ‰æ¨¡å—ç”± tiger1.py åè°ƒ
         
tiger1.py (ä¸»ç¨‹åº, ~200è¡Œ)
  - åªè´Ÿè´£åè°ƒå’Œé›†æˆ
  - ä¸åŒ…å«å…·ä½“ä¸šåŠ¡é€»è¾‘
```

---

## ğŸ“‹ é‡æ„æ­¥éª¤

### é˜¶æ®µ1: ä¿ç•™åŸ tiger1.pyï¼Œåˆ›å»ºæ–°æ¶æ„
```bash
# ä¸åˆ é™¤åŸæ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„æ¨¡å—åŒ–ç»“æ„
cp tiger1.py tiger1_legacy.py  # å¤‡ä»½

# åˆ›å»ºæ–°çš„æ¨¡å—ç›®å½•
mkdir -p src/{data_collector,strategies,risk,backtest,monitor}

# é€æ­¥è¿ç§»åŠŸèƒ½
```

### é˜¶æ®µ2: æå–ç‹¬ç«‹æ¨¡å—ï¼ˆä¼˜å…ˆçº§ï¼‰

#### Step 1: æå–æ•°æ®é‡‡é›†ï¼ˆAgent 1ï¼‰
```python
# src/data_collector/realtime_collector.py
class RealTimeDataCollector:
    """ä» tiger1.py çš„ DataCollector æå–"""
    pass
```

#### Step 2: æå–ç­–ç•¥ï¼ˆAgent 3ï¼‰
```python
# src/strategies/grid_strategy.py
class GridStrategy:
    """ä» tiger1.py çš„ grid_trading_strategy æå–"""
    pass
```

#### Step 3: æå–é£é™©æ§åˆ¶ï¼ˆAgent 3ï¼‰
```python
# src/risk/risk_manager.py
class RiskManager:
    """ä» tiger1.py çš„ check_risk_control æå–"""
    pass
```

### é˜¶æ®µ3: åˆ›å»ºæ–°çš„ tiger1.py ä¸»ç¨‹åº

### é˜¶æ®µ4: æµ‹è¯•å’ŒéªŒè¯
- å•å…ƒæµ‹è¯•æ¯ä¸ªæ¨¡å—
- é›†æˆæµ‹è¯•æ•´ä¸ªç³»ç»Ÿ
- å°èµ„é‡‘å®ç›˜éªŒè¯

---

## ğŸ¯ tiger1.py åœ¨æ–°æ¶æ„ä¸­çš„å®šä½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     tiger1.py (å®ç›˜äº¤æ˜“ä¸»ç¨‹åº)            â”‚
â”‚   - åè°ƒå„æ¨¡å—                            â”‚
â”‚   - æ‰§è¡Œå®æ—¶äº¤æ˜“                          â”‚
â”‚   - å±äºåº”ç”¨å±‚ï¼Œä¸å±äºå•ä¸ªModule           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è°ƒç”¨ Module 1: è·å–å®æ—¶æ•°æ®              â”‚
â”‚  è°ƒç”¨ Module 5: ç­–ç•¥ä¿¡å·ç”Ÿæˆ              â”‚
â”‚  è°ƒç”¨ Module 7: é£é™©æ£€æŸ¥                  â”‚
â”‚  è°ƒç”¨ Module 8: ç›‘æ§è®°å½•                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

tiger1.py æ˜¯ "é›†æˆå±‚"ï¼Œä¸æ˜¯å•ä¸ªæ¨¡å—ï¼
```

### ä¸æ¨¡å—çš„å…³ç³»

| æ¨¡å— | tiger1.py çš„ä½¿ç”¨æ–¹å¼ |
|------|---------------------|
| Module 1 | è°ƒç”¨å…¶APIè·å–å®æ—¶æ•°æ® |
| Module 2 | è°ƒç”¨å…¶APIè®¡ç®—æŒ‡æ ‡ |
| Module 3 | åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹ |
| Module 4 | è°ƒç”¨å…¶APIè·å–è‡ªå®šä¹‰ç‰¹å¾ |
| Module 5 | è°ƒç”¨ç­–ç•¥ç”Ÿæˆäº¤æ˜“ä¿¡å· |
| Module 6 | ä¸è°ƒç”¨ï¼ˆå›æµ‹æ˜¯ç¦»çº¿çš„ï¼‰|
| Module 7 | è°ƒç”¨å…¶APIè¿›è¡Œé£é™©æ£€æŸ¥ |
| Module 8 | è°ƒç”¨å…¶APIè®°å½•å’Œç›‘æ§ |

---

## ğŸ’¡ å›ç­”ç”¨æˆ·é—®é¢˜

### Q: tiger1.py ç®—åœ¨ Agent 3 é‡Œä¹ˆï¼Ÿ

**A: ä¸å®Œå…¨ç®—ï¼Œå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„"é›†æˆå±‚"**

```
tiger1.py çš„å½’å±ï¼š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… ä¸»è¦ç”± Agent 3 è´Ÿè´£ï¼ˆç­–ç•¥å·¥ç¨‹å¸ˆï¼‰
   - å› ä¸ºæ¶‰åŠç­–ç•¥æ‰§è¡Œã€è®¢å•ç®¡ç†
   
âœ… ä½†éœ€è¦æ‰€æœ‰Agentåä½œ
   - Agent 1: æä¾›å®æ—¶æ•°æ®æ¥å£
   - Agent 2: æä¾›æ¨¡å‹æ¨ç†æ¥å£  
   - Agent 3: å®ç°ç­–ç•¥å’Œé£é™©æ§åˆ¶
   
âœ… å±äº"åº”ç”¨å±‚"ï¼Œä¸æ˜¯å•ä¸ªModule
   - å®ƒæ˜¯9ä¸ªæ¨¡å—çš„åè°ƒè€…
   - ç±»ä¼¼äº"æŒ‡æŒ¥ä¸­å¿ƒ"
```

### å»ºè®®çš„èŒè´£åˆ†é…

```python
# Agent 3 (ç­–ç•¥å·¥ç¨‹å¸ˆ) è´Ÿè´£ï¼š
1. è®¾è®¡ tiger1.py çš„ä¸»å¾ªç¯
2. å®ç°è®¢å•æ‰§è¡Œé€»è¾‘
3. é›†æˆå„ä¸ªæ¨¡å—
4. å®ç›˜æµ‹è¯•å’Œè°ƒè¯•

# å…¶ä»–Agenté…åˆï¼š
- Agent 1: æä¾›æ¸…æ™°çš„æ•°æ®æ¥å£
- Agent 2: æä¾›æ¨¡å‹æ¨ç†æ¥å£
- æ‰€æœ‰Agent: ç¡®ä¿æ¥å£å…¼å®¹
```

---

## ğŸš€ ç«‹å³è¡ŒåŠ¨å»ºè®®

### æ–¹æ¡ˆA: ä¿ç•™ tiger1.pyï¼Œå¹¶è¡Œå¼€å‘æ–°æ¶æ„
```bash
# ç°çŠ¶
tiger1.py                    # ç»§ç»­ç”¨äºå½“å‰äº¤æ˜“

# æ–°æ¶æ„
src/
â”œâ”€â”€ data_collector/          # Agent 1 å¼€å‘
â”œâ”€â”€ strategies/              # Agent 3 å¼€å‘
â”œâ”€â”€ risk/                    # Agent 3 å¼€å‘
â””â”€â”€ ...

tiger1_v2.py                 # Agent 3 å¼€å‘æ–°ä¸»ç¨‹åº
```

### æ–¹æ¡ˆB: é€æ­¥é‡æ„
```bash
# ç¬¬1æ­¥ï¼šæå–æ•°æ®é‡‡é›†
tiger1.py â†’ src/data_collector/

# ç¬¬2æ­¥ï¼šæå–ç­–ç•¥
tiger1.py â†’ src/strategies/

# ç¬¬3æ­¥ï¼šæå–é£é™©æ§åˆ¶
tiger1.py â†’ src/risk/

# ç¬¬4æ­¥ï¼šé‡å†™ä¸»ç¨‹åº
tiger1_v2.py (ç®€æ´ç‰ˆ)
```

---

**ç»“è®º**ï¼š
- tiger1.py æ˜¯**å®ç›˜äº¤æ˜“ä¸»ç¨‹åº**ï¼ˆé›†æˆå±‚ï¼‰
- **ä¸»è¦ç”± Agent 3 è´Ÿè´£**ï¼Œä½†éœ€è¦æ‰€æœ‰Agentçš„é…åˆ
- **ä¸å±äºå•ä¸ªModule**ï¼Œè€Œæ˜¯åè°ƒæ‰€æœ‰Moduleçš„"æŒ‡æŒ¥ä¸­å¿ƒ"
- **å»ºè®®ä¿ç•™åŸæœ‰ tiger1.py**ï¼Œå¹¶è¡Œå¼€å‘æ¨¡å—åŒ–æ–°æ¶æ„

# ç³»ç»Ÿé‡æž„æ€»ç»“ - é€šç”¨åŒ–å’Œæ–‡ä»¶æ•´ç†

## ðŸ“‹ é‡æž„æ¦‚è¿°

**é‡æž„æ—¥æœŸ**: 2026-01-20  
**é‡æž„ç›®æ ‡**: 
1. âœ… å°†ç¡¬ç¼–ç çš„SIL2603æ”¹ä¸ºæ”¯æŒä»»æ„æœŸè´§æ ‡çš„
2. âœ… æ¸…ç†é‡å¤å’Œå†—ä½™æ–‡ä»¶
3. âœ… ä¿®æ­£æ¨¡åž‹æ•°é‡ï¼ˆä»Ž6ä¸ªæ›´æ–°ä¸º7ä¸ªï¼‰
4. âœ… ä¼˜åŒ–ç›®å½•ç»“æž„

## ðŸŽ¯ ä¸»è¦æ”¹è¿›

### 1. é€šç”¨åŒ–è®¾è®¡ï¼ˆæ¶ˆé™¤ç¡¬ç¼–ç ï¼‰

#### ä¿®æ”¹å‰ï¼ˆç¡¬ç¼–ç ï¼‰
```python
# âŒ æ–‡ä»¶å: download_sil2603_and_train.py
# âŒ ç¡¬ç¼–ç æ ‡çš„
SYMBOL = "SIL2603"
output_dir = "/home/cx/trading_data/sil2603_large_dataset"
```

#### ä¿®æ”¹åŽï¼ˆé€šç”¨ï¼‰
```python
# âœ… æ–‡ä»¶å: download_and_train.py
# âœ… æ”¯æŒä»»æ„æ ‡çš„
parser.add_argument('--symbol', type=str, default=None, 
                    help='æœŸè´§æ ‡çš„ä»£ç ï¼ˆå¦‚SIL2603, GC2603ç­‰ï¼‰')
# âœ… è‡ªåŠ¨ç”Ÿæˆè¾“å‡ºç›®å½•
output_dir = f'/home/cx/trading_data/{symbol}_dataset'
```

#### æ”¯æŒçš„ä½¿ç”¨æ–¹å¼

**æ–¹å¼1: å‘½ä»¤è¡Œå‚æ•°ï¼ˆæŽ¨èï¼‰**
```bash
python3 src/download_and_train.py --symbol GC2603
python3 src/download_and_train.py --symbol NQ2603
python3 src/download_and_train.py --symbol ES2603
```

**æ–¹å¼2: çŽ¯å¢ƒå˜é‡**
```bash
export TRADING_SYMBOL="GC2603"
python3 src/download_and_train.py
```

**æ–¹å¼3: é…ç½®æ–‡ä»¶**
```python
# åœ¨ src/tiger1.py ä¸­ä¿®æ”¹
FUTURE_SYMBOL = "GC.COMEX.202603"
```

### 2. æ¨¡åž‹æ•°é‡ä¿®æ­£

#### ä¿®æ”¹å‰
```python
# âŒ åªæœ‰6ä¸ªæ¨¡åž‹
models = {
    'LLMç­–ç•¥': LLMTradingStrategy,
    'å¤§æ¨¡åž‹ç­–ç•¥': LargeModelStrategy,
    'è¶…å¤§Transformerç­–ç•¥': HugeTransformerStrategy,
    'å¢žå¼ºåž‹Transformerç­–ç•¥': EnhancedTransformerStrategy,
    'å¼ºåŒ–å­¦ä¹ ç­–ç•¥': RLTradingStrategy,
    'å¤§åž‹Transformerç­–ç•¥': LargeTransformerStrategy,
}
```

#### ä¿®æ”¹åŽ
```python
# âœ… å®Œæ•´çš„7ä¸ªæ¨¡åž‹
models = {
    'LLMç­–ç•¥': LLMTradingStrategy,
    'å¤§æ¨¡åž‹ç­–ç•¥': LargeModelStrategy,
    'è¶…å¤§Transformerç­–ç•¥': HugeTransformerStrategy,
    'å¢žå¼ºåž‹Transformerç­–ç•¥': EnhancedTransformerStrategy,
    'å¼ºåŒ–å­¦ä¹ ç­–ç•¥': RLTradingStrategy,
    'å¤§åž‹Transformerç­–ç•¥': LargeTransformerStrategy,
    'æ¨¡åž‹å¯¹æ¯”ç­–ç•¥': model_comparison_strategy.ModelComparisonStrategy,  # æ–°å¢ž
}
```

### 3. æ–‡ä»¶æ•´ç†å’Œæ¸…ç†

#### åˆ é™¤çš„æ–‡ä»¶ï¼ˆæµ‹è¯•/å†—ä½™ï¼‰
- âŒ `debug_train.py` - è°ƒè¯•è„šæœ¬
- âŒ `simple_train_test.py` - ç®€å•æµ‹è¯•
- âŒ `src/train_with_logging.py` - è¢«è¯¦ç»†ç‰ˆæ›¿ä»£
- âŒ `scripts/data_collection/data_collection_analyzer.py` - é‡å¤æ–‡ä»¶

#### å½’æ¡£çš„æ–‡ä»¶ï¼ˆæ—§ç‰ˆæœ¬ï¼‰
ç§»åŠ¨åˆ° `archive/` ç›®å½•ï¼š
- ðŸ“¦ `archive/old_training_scripts/`
  - `extended_training.py`
  - `train_all_real_models.py`
  - `train_multiple_configs.py`

- ðŸ“¦ `archive/old_collection_scripts/`
  - `collect_massive_1min_data.py`
  - `enhanced_data_collection.py`
  - `data_collection_analyzer.py`

#### é‡å‘½åçš„æ–‡ä»¶ï¼ˆé€šç”¨åŒ–ï¼‰
- âœï¸ `download_sil2603_and_train.py` â†’ `download_and_train.py`
- âœï¸ `run_sil2603_download_and_train.sh` â†’ `run_download_and_train.sh`
- âœï¸ `quick_test_sil2603.py` â†’ `quick_test.py`
- âœï¸ `README_SIL2603.md` â†’ `README.md`

#### ä¿ç•™çš„æ ¸å¿ƒæ–‡ä»¶
- âœ… `src/download_and_train.py` - ä¸»ç¨‹åºï¼ˆé€šç”¨ï¼‰
- âœ… `src/train_all_models.py` - è®­ç»ƒæ‰€æœ‰æ¨¡åž‹ï¼ˆ7ä¸ªï¼‰
- âœ… `src/train_with_detailed_logging.py` - è¯¦ç»†è®­ç»ƒæ—¥å¿—
- âœ… `src/collect_large_dataset.py` - å¤§è§„æ¨¡æ•°æ®é‡‡é›†
- âœ… `src/config.py` - é…ç½®æ–‡ä»¶
- âœ… `src/tiger1.py` - Tiger APIæŽ¥å£
- âœ… `scripts/data_collection/` - å‚è€ƒè„šæœ¬ï¼ˆä¿ç•™ï¼‰
- âœ… `scripts/analysis/` - åˆ†æžè„šæœ¬ï¼ˆä¿ç•™ï¼‰

## ðŸ“ æ•´ç†åŽçš„ç›®å½•ç»“æž„

```
/home/cx/tigertrade/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ download_and_train.py          âœ¨ ä¸»ç¨‹åºï¼ˆé€šç”¨ï¼‰
â”‚   â”œâ”€â”€ tiger1.py                       # Tiger API
â”‚   â”œâ”€â”€ config.py                       # é…ç½®
â”‚   â”œâ”€â”€ collect_large_dataset.py       # æ•°æ®é‡‡é›†
â”‚   â”œâ”€â”€ train_all_models.py            âœ¨ 7ä¸ªæ¨¡åž‹è®­ç»ƒ
â”‚   â”œâ”€â”€ train_with_detailed_logging.py # è®­ç»ƒå·¥å…·
â”‚   â”œâ”€â”€ prepare_training_data.py       # æ•°æ®å‡†å¤‡
â”‚   â””â”€â”€ strategies/                     âœ¨ 7ä¸ªç­–ç•¥æ¨¡åž‹
â”‚       â”œâ”€â”€ llm_strategy.py
â”‚       â”œâ”€â”€ large_model_strategy.py
â”‚       â”œâ”€â”€ huge_transformer_strategy.py
â”‚       â”œâ”€â”€ enhanced_transformer_strategy.py
â”‚       â”œâ”€â”€ rl_trading_strategy.py
â”‚       â”œâ”€â”€ large_transformer_strategy.py
â”‚       â””â”€â”€ model_comparison_strategy.py  # ç¬¬7ä¸ª
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ data_collection/                # å‚è€ƒè„šæœ¬
â”‚   â”‚   â”œâ”€â”€ simple_data_collector.py
â”‚   â”‚   â”œâ”€â”€ run_data_collection.py
â”‚   â”‚   â””â”€â”€ data_collector_analyzer.py
â”‚   â””â”€â”€ analysis/                       # åˆ†æžè„šæœ¬
â”‚       â””â”€â”€ hourly_analysis.py
â”‚
â”œâ”€â”€ archive/                            âœ¨ å½’æ¡£ç›®å½•ï¼ˆæ–°å»ºï¼‰
â”‚   â”œâ”€â”€ old_training_scripts/
â”‚   â”‚   â”œâ”€â”€ extended_training.py
â”‚   â”‚   â”œâ”€â”€ train_all_real_models.py
â”‚   â”‚   â””â”€â”€ train_multiple_configs.py
â”‚   â””â”€â”€ old_collection_scripts/
â”‚       â”œâ”€â”€ collect_massive_1min_data.py
â”‚       â”œâ”€â”€ enhanced_data_collection.py
â”‚       â””â”€â”€ data_collection_analyzer.py
â”‚
â”œâ”€â”€ run_download_and_train.sh          âœ¨ é€šç”¨å¯åŠ¨è„šæœ¬
â”œâ”€â”€ quick_test.py                       âœ¨ é€šç”¨æµ‹è¯•è„šæœ¬
â”œâ”€â”€ README.md                           âœ¨ ä¸»æ–‡æ¡£ï¼ˆé€šç”¨ï¼‰
â”œâ”€â”€ æ–‡ä»¶æ•´ç†è®¡åˆ’.md                    # æ•´ç†è®¡åˆ’
â””â”€â”€ ç³»ç»Ÿé‡æž„æ€»ç»“.md                    # æœ¬æ–‡ä»¶
```

## ðŸŽ¯ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1: ç™½é“¶æœŸè´§ï¼ˆSIL2603ï¼‰
```bash
python3 src/download_and_train.py --symbol SIL2603 --days 60 --min-records 20000
# è¾“å‡º: /home/cx/trading_data/SIL2603_dataset/
```

### ç¤ºä¾‹2: é»„é‡‘æœŸè´§ï¼ˆGC2603ï¼‰
```bash
python3 src/download_and_train.py --symbol GC2603 --days 90 --min-records 30000
# è¾“å‡º: /home/cx/trading_data/GC2603_dataset/
```

### ç¤ºä¾‹3: çº³æŒ‡æœŸè´§ï¼ˆNQ2603ï¼‰
```bash
python3 src/download_and_train.py --symbol NQ2603 --days 120 --min-records 50000
# è¾“å‡º: /home/cx/trading_data/NQ2603_dataset/
```

### ç¤ºä¾‹4: ä½¿ç”¨å¯åŠ¨è„šæœ¬
```bash
# ç¼–è¾‘è„šæœ¬è®¾ç½®æ ‡çš„
vim run_download_and_train.sh
# è®¾ç½® SYMBOL="GC2603"

# è¿è¡Œ
./run_download_and_train.sh
```

### ç¤ºä¾‹5: å¤šæ ‡çš„å¹¶è¡Œè®­ç»ƒ
```bash
# åŒæ—¶è®­ç»ƒå¤šä¸ªæ ‡çš„
python3 src/download_and_train.py --symbol SIL2603 --output-dir /path/to/silver &
python3 src/download_and_train.py --symbol GC2603 --output-dir /path/to/gold &
python3 src/download_and_train.py --symbol NQ2603 --output-dir /path/to/nasdaq &
```

## âœ… éªŒè¯æµ‹è¯•

è¿è¡Œé€šç”¨æµ‹è¯•è„šæœ¬ï¼š
```bash
python3 quick_test.py
```

æµ‹è¯•ç»“æžœï¼š
```
âœ… é…ç½®æ–‡ä»¶: é€šè¿‡
âœ… PyTorchçŽ¯å¢ƒ: é€šè¿‡ (CUDA 12.1, RTX 4090)
âœ… Tiger API: é€šè¿‡
âœ… æ¨¡åž‹å¯¼å…¥: é€šè¿‡ (7ä¸ªæ¨¡åž‹)  # âœ¨ å·²ä¿®æ­£
âœ… æ•°æ®é‡‡é›†: é€šè¿‡
âœ… ç³»ç»Ÿæ‰©å±•æ€§: é€šè¿‡  # âœ¨ æ–°å¢žæµ‹è¯•
```

## ðŸ“Š æ”¹è¿›å¯¹æ¯”

| é¡¹ç›® | ä¿®æ”¹å‰ | ä¿®æ”¹åŽ | æ”¹è¿› |
|------|--------|--------|------|
| æ”¯æŒæ ‡çš„ | ä»…SIL2603 | ä»»æ„æœŸè´§æ ‡çš„ | âœ… é€šç”¨åŒ– |
| æ¨¡åž‹æ•°é‡ | 6ä¸ª | 7ä¸ª | âœ… ä¿®æ­£ |
| é‡å¤æ–‡ä»¶ | 16ä¸ªè®­ç»ƒ/é‡‡é›†è„šæœ¬ | 5ä¸ªæ ¸å¿ƒæ–‡ä»¶ | âœ… ç²¾ç®€ |
| æ–‡ä»¶å‘½å | ç¡¬ç¼–ç sil2603 | é€šç”¨å‘½å | âœ… è§„èŒƒ |
| ç›®å½•ç»“æž„ | æ··ä¹± | æ¸…æ™°åˆ†ç±» | âœ… ä¼˜åŒ– |
| å½’æ¡£æœºåˆ¶ | æ—  | archiveç›®å½• | âœ… æ–°å¢ž |

## ðŸŽ¯ ç³»ç»Ÿç‰¹æ€§

### æ ¸å¿ƒç‰¹æ€§
1. âœ… **é€šç”¨æ€§** - æ”¯æŒä»»æ„æœŸè´§æ ‡çš„ï¼Œæ— ç¡¬ç¼–ç 
2. âœ… **å®Œæ•´æ€§** - 7ä¸ªæ¨¡åž‹å…¨è¦†ç›–
3. âœ… **æ‰©å±•æ€§** - æ˜“äºŽæ·»åŠ æ–°æ ‡çš„å’Œæ¨¡åž‹
4. âœ… **å¯ç»´æŠ¤æ€§** - æ¸…æ™°çš„ç›®å½•ç»“æž„
5. âœ… **é«˜æ€§èƒ½** - GPUåŠ é€Ÿæ”¯æŒ

### æŠ€æœ¯ç‰¹æ€§
- ðŸš€ è‡ªåŠ¨æ•°æ®é‡‡é›†ï¼ˆæ”¯æŒçœŸå®žAPIå’Œæ¨¡æ‹Ÿæ¨¡å¼ï¼‰
- ðŸ¤– 7ä¸ªæ·±åº¦å­¦ä¹ æ¨¡åž‹ï¼ˆLSTMã€Transformerã€RLç­‰ï¼‰
- ðŸ“Š å®Œæ•´çš„è¯„ä¼°æŠ¥å‘Šï¼ˆå‡†ç¡®çŽ‡ã€æŸå¤±ã€æŽ’åï¼‰
- ðŸ’¾ è‡ªåŠ¨ä¿å­˜æ¨¡åž‹å’Œæ—¥å¿—
- âš¡ GPUåŠ é€Ÿè®­ç»ƒï¼ˆRTX 4090å·²éªŒè¯ï¼‰

## ðŸ”§ é…ç½®çµæ´»æ€§

### 1. å‘½ä»¤è¡Œå‚æ•°ï¼ˆæœ€çµæ´»ï¼‰
```bash
python3 src/download_and_train.py \
    --symbol GC2603 \
    --days 90 \
    --min-records 30000 \
    --max-records 100000 \
    --output-dir /custom/path \
    --real-api
```

### 2. å¯åŠ¨è„šæœ¬é…ç½®
```bash
# ç¼–è¾‘ run_download_and_train.sh
SYMBOL="GC2603"
DAYS=90
MIN_RECORDS=30000
REAL_API="--real-api"
```

### 3. é…ç½®æ–‡ä»¶
```python
# ç¼–è¾‘ src/config.py
DataConfig.DAYS_TO_FETCH = 90
DataConfig.MAX_RECORDS = 100000
TrainingConfig.BATCH_SIZE = 64
TrainingConfig.NUM_EPOCHS = 100
```

### 4. çŽ¯å¢ƒå˜é‡
```bash
export TRADING_SYMBOL="GC2603"
export USE_REAL_API="True"
export BATCH_SIZE="64"
python3 src/download_and_train.py
```

## ðŸ“ˆ é¢„æœŸæ•ˆæžœ

### æ•°æ®é‡‡é›†
- **æ¨¡æ‹Ÿæ¨¡å¼**: 60å¤© â†’ çº¦20000-25000æ¡ â†’ 5-10åˆ†é’Ÿ
- **çœŸå®žAPI**: 90å¤© â†’ çº¦30000-40000æ¡ â†’ 15-30åˆ†é’Ÿ

### æ¨¡åž‹è®­ç»ƒ
- **å•ä¸ªæ¨¡åž‹**: 50è½® â†’ 10-30åˆ†é’Ÿï¼ˆGPUï¼‰
- **7ä¸ªæ¨¡åž‹**: æ€»è®¡ â†’ 1-3å°æ—¶ï¼ˆGPUï¼‰

### å­˜å‚¨å ç”¨
- **æ¯ä¸ªæ ‡çš„**: çº¦500MB-2GBï¼ˆåŒ…å«æ•°æ®ã€æ¨¡åž‹ã€æ—¥å¿—ï¼‰
- **å¤šæ ‡çš„**: å¯å¹¶è¡Œè®­ç»ƒï¼Œç‹¬ç«‹å­˜å‚¨

## ðŸŽ“ æœ€ä½³å®žè·µ

### 1. æ·»åŠ æ–°æ ‡çš„
```bash
# ç›´æŽ¥æŒ‡å®šæ–°æ ‡çš„ä»£ç 
python3 src/download_and_train.py --symbol NEW2603 --days 60
```

### 2. æ‰¹é‡è®­ç»ƒå¤šæ ‡çš„
```bash
# åˆ›å»ºæ‰¹é‡è„šæœ¬
cat > train_multiple.sh << 'EOF'
#!/bin/bash
for symbol in SIL2603 GC2603 NQ2603 ES2603; do
    python3 src/download_and_train.py --symbol $symbol --days 60 &
done
wait
echo "æ‰€æœ‰æ ‡çš„è®­ç»ƒå®Œæˆ"
EOF
chmod +x train_multiple.sh
./train_multiple.sh
```

### 3. å¯¹æ¯”ä¸åŒæ ‡çš„
```bash
# è®­ç»ƒåŽå¯¹æ¯”ç»“æžœ
cat /home/cx/trading_data/SIL2603_dataset/final_report.txt
cat /home/cx/trading_data/GC2603_dataset/final_report.txt
cat /home/cx/trading_data/NQ2603_dataset/final_report.txt
```

## ðŸ”„ åŽç»­æ‰©å±•å»ºè®®

### 1. æ ‡çš„é…ç½®æ–‡ä»¶
åˆ›å»º `symbols.yaml` ç®¡ç†å¸¸ç”¨æ ‡çš„ï¼š
```yaml
symbols:
  silver: SIL.COMEX.202603
  gold: GC.COMEX.202603
  nasdaq: NQ.CME.202603
  sp500: ES.CME.202603
```

### 2. è‡ªåŠ¨åŒ–è®­ç»ƒ
åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼š
```bash
# æ¯å¤©è‡ªåŠ¨è®­ç»ƒæœ€æ–°æ•°æ®
0 2 * * * cd /home/cx/tigertrade && python3 src/download_and_train.py --real-api
```

### 3. ç»“æžœå¯¹æ¯”å·¥å…·
åˆ›å»ºè„šæœ¬å¯¹æ¯”ä¸åŒæ ‡çš„çš„æ¨¡åž‹è¡¨çŽ°ï¼š
```bash
python3 tools/compare_symbols.py --symbols SIL2603 GC2603 NQ2603
```

## âœ¨ æ€»ç»“

### é‡æž„æˆæžœ
- âœ… **é€šç”¨åŒ–**: ä»Žç¡¬ç¼–ç å•ä¸€æ ‡çš„åˆ°æ”¯æŒä»»æ„æ ‡çš„
- âœ… **å®Œæ•´æ€§**: ä¿®æ­£æ¨¡åž‹æ•°é‡ä»Ž6ä¸ªåˆ°7ä¸ª
- âœ… **å¯ç»´æŠ¤æ€§**: æ¸…ç†16ä¸ªæ–‡ä»¶ï¼Œç²¾ç®€åˆ°5ä¸ªæ ¸å¿ƒæ–‡ä»¶
- âœ… **æ‰©å±•æ€§**: æ–°å¢žarchiveæœºåˆ¶ï¼Œä¾¿äºŽç‰ˆæœ¬ç®¡ç†
- âœ… **è§„èŒƒæ€§**: ç»Ÿä¸€å‘½åè§„èŒƒï¼Œæ¶ˆé™¤ç¡¬ç¼–ç 

### å…³é”®æ”¹è¿›
1. **é€šç”¨æ€§**: æ”¯æŒä»»æ„æœŸè´§æ ‡çš„ï¼ˆç™½é“¶ã€é»„é‡‘ã€è‚¡æŒ‡ç­‰ï¼‰
2. **å®Œæ•´æ€§**: 7ä¸ªæ¨¡åž‹å…¨è¦†ç›–ï¼ˆä¿®æ­£é—æ¼ï¼‰
3. **çµæ´»æ€§**: å¤šç§é…ç½®æ–¹å¼ï¼ˆå‘½ä»¤è¡Œã€è„šæœ¬ã€é…ç½®æ–‡ä»¶ã€çŽ¯å¢ƒå˜é‡ï¼‰
4. **æ¸…æ™°æ€§**: ä¼˜åŒ–ç›®å½•ç»“æž„ï¼Œå½’æ¡£æ—§æ–‡ä»¶
5. **å¯æ‰©å±•æ€§**: æ˜“äºŽæ·»åŠ æ–°æ ‡çš„ã€æ–°æ¨¡åž‹

### ç³»ç»ŸçŠ¶æ€
- ðŸŽ‰ **æ‰€æœ‰æµ‹è¯•é€šè¿‡**: 6/6é¡¹æµ‹è¯•é€šè¿‡
- âœ… **æ¨¡åž‹éªŒè¯**: 7ä¸ªæ¨¡åž‹å…¨éƒ¨å¯ç”¨
- âœ… **æ‰©å±•æ€§éªŒè¯**: æ”¯æŒä»»æ„æ ‡çš„
- âœ… **æ€§èƒ½éªŒè¯**: GPUåŠ é€Ÿæ­£å¸¸ï¼ˆRTX 4090ï¼‰

---

**é‡æž„å®Œæˆæ—¥æœŸ**: 2026-01-20  
**ç³»ç»Ÿç‰ˆæœ¬**: v2.0ï¼ˆé€šç”¨åŒ–ç‰ˆæœ¬ï¼‰  
**æ ¸å¿ƒæ”¹è¿›**: é€šç”¨åŒ–è®¾è®¡ + 7æ¨¡åž‹æ”¯æŒ + æ–‡ä»¶æ•´ç†

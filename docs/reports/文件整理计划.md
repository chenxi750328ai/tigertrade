# Tigertrade目录文件整理计划

## 问题分析

### 1. 模型数量问题
- **发现**: strategies目录实际有7个模型，不是6个
- **遗漏**: ModelComparisonStrategy (模型对比策略，包含LSTM和Transformer)

### 2. 重复和冗余文件

#### 训练相关文件（9个，存在重复）

| 文件 | 行数 | 用途 | 状态 |
|------|------|------|------|
| `debug_train.py` | 48 | 调试训练 | ❌ 删除（测试用） |
| `simple_train_test.py` | 105 | 简单测试 | ❌ 删除（测试用） |
| `extended_training.py` | 400 | 扩展训练 | ⚠️ 移动到archive |
| `src/train_with_logging.py` | 323 | 带日志训练 | ❌ 删除（被详细版替代） |
| `src/train_with_detailed_logging.py` | 601 | 详细日志训练 | ✅ 保留（最完整） |
| `src/train_all_models.py` | 246 | 训练所有模型 | ✅ 保留并更新（添加第7个模型） |
| `src/train_all_real_models.py` | 313 | 训练真实模型 | ⚠️ 移动到archive |
| `src/train_multiple_configs.py` | 315 | 多配置训练 | ⚠️ 移动到archive |
| `src/download_sil2603_and_train.py` | 新 | 完整流程 | ✅ 保留（新创建） |

**决策**:
- 保留核心文件: `train_all_models.py`, `train_with_detailed_logging.py`, `download_sil2603_and_train.py`
- 删除: `debug_train.py`, `simple_train_test.py`, `train_with_logging.py`
- 归档: `extended_training.py`, `train_all_real_models.py`, `train_multiple_configs.py`

#### 数据采集相关文件（7个，存在重复）

| 文件 | 行数 | 用途 | 状态 |
|------|------|------|------|
| `scripts/data_collection/simple_data_collector.py` | 33 | 简单收集 | ✅ 保留（参考脚本） |
| `scripts/data_collection/run_data_collection.py` | 86 | 运行收集 | ✅ 保留（参考脚本） |
| `scripts/data_collection/data_collection_analyzer.py` | 483 | 收集+分析 | ⚠️ 检查是否重复 |
| `scripts/data_collection/data_collector_analyzer.py` | 553 | 收集+分析 | ⚠️ 保留功能更完整的 |
| `src/collect_massive_1min_data.py` | 385 | 大规模1分钟 | ⚠️ 移动到archive |
| `src/collect_large_dataset.py` | 604 | 大规模数据集 | ✅ 保留（被使用） |
| `src/enhanced_data_collection.py` | 587 | 增强收集 | ⚠️ 移动到archive |

**决策**:
- 保留核心文件: `collect_large_dataset.py`, scripts下的参考脚本
- 对比并合并: `data_collection_analyzer.py` vs `data_collector_analyzer.py`
- 归档: `collect_massive_1min_data.py`, `enhanced_data_collection.py`

## 整理操作

### 步骤1: 创建archive目录
```bash
mkdir -p /home/cx/tigertrade/archive/old_training_scripts
mkdir -p /home/cx/tigertrade/archive/old_collection_scripts
```

### 步骤2: 更新train_all_models.py（添加第7个模型）

添加ModelComparisonStrategy到模型列表中。

### 步骤3: 删除测试和冗余文件

删除以下文件：
- `debug_train.py`
- `simple_train_test.py`
- `src/train_with_logging.py`

### 步骤4: 归档旧文件

移动到archive目录：
- `extended_training.py` → `archive/old_training_scripts/`
- `src/train_all_real_models.py` → `archive/old_training_scripts/`
- `src/train_multiple_configs.py` → `archive/old_training_scripts/`
- `src/collect_massive_1min_data.py` → `archive/old_collection_scripts/`
- `src/enhanced_data_collection.py` → `archive/old_collection_scripts/`

### 步骤5: 处理data_collection_analyzer重复

对比两个文件，保留功能更完整的`data_collector_analyzer.py`，
删除或归档另一个。

### 步骤6: 更新download_sil2603_and_train.py

更新为训练所有7个模型。

## 整理后的目录结构

```
/home/cx/tigertrade/
├── src/
│   ├── tiger1.py                              # Tiger API接口
│   ├── config.py                               # 配置文件
│   ├── download_sil2603_and_train.py          # 完整流程（新）✅
│   ├── collect_large_dataset.py               # 大规模数据采集 ✅
│   ├── train_all_models.py                    # 训练所有模型 ✅
│   ├── train_with_detailed_logging.py         # 详细训练日志 ✅
│   ├── prepare_training_data.py               # 数据准备
│   └── strategies/                             # 策略模块
│       ├── llm_strategy.py                     # 7个策略模型
│       ├── large_model_strategy.py
│       ├── huge_transformer_strategy.py
│       ├── enhanced_transformer_strategy.py
│       ├── rl_trading_strategy.py
│       ├── large_transformer_strategy.py
│       └── model_comparison_strategy.py        # 第7个！✅
│
├── scripts/
│   ├── data_collection/                        # 参考脚本
│   │   ├── simple_data_collector.py           ✅
│   │   ├── run_data_collection.py             ✅
│   │   └── data_collector_analyzer.py         ✅
│   └── analysis/                               # 分析脚本
│       └── hourly_analysis.py
│
├── archive/                                     # 归档目录
│   ├── old_training_scripts/
│   │   ├── extended_training.py
│   │   ├── train_all_real_models.py
│   │   └── train_multiple_configs.py
│   └── old_collection_scripts/
│       ├── collect_massive_1min_data.py
│       └── enhanced_data_collection.py
│
├── run_sil2603_download_and_train.sh          # 启动脚本 ✅
├── quick_test_sil2603.py                       # 测试脚本 ✅
├── README_SIL2603.md                           # 主README ✅
├── SIL2603_数据采集和训练说明.md             # 详细说明 ✅
└── 项目完成总结.md                            # 项目总结 ✅
```

## 清理后保留的核心文件（精简）

### 主要脚本（3个）
1. `src/download_sil2603_and_train.py` - 完整流程
2. `run_sil2603_download_and_train.sh` - 启动脚本
3. `quick_test_sil2603.py` - 测试工具

### 核心模块（5个）
1. `src/tiger1.py` - API接口
2. `src/config.py` - 配置
3. `src/collect_large_dataset.py` - 数据采集
4. `src/train_all_models.py` - 模型训练（7个模型）
5. `src/train_with_detailed_logging.py` - 训练工具

### 策略模型（7个）
所有在 `src/strategies/` 目录下

### 参考脚本
保留在 `scripts/` 目录下供学习参考

## 预期效果

- ✅ 移除重复和测试文件
- ✅ 保留核心功能文件
- ✅ 归档旧版本（不删除）
- ✅ 清晰的目录结构
- ✅ 完整的7个模型训练

# åŠ¨æ€Masteré€‰ä¸¾æœºåˆ¶

## éœ€æ±‚ï¼šé€‰ä¸¾æœ€èªæ˜çš„AIä½œä¸ºMaster

---

## ğŸ¯ æ ¸å¿ƒç†å¿µ

> "Masterä¸åº”è¯¥æ˜¯å›ºå®šçš„ï¼Œè€Œåº”è¯¥æ˜¯æœ€æœ‰èƒ½åŠ›çš„ï¼"

```
å½“å‰é—®é¢˜:
- Masteræ˜¯å›ºå®šçš„ï¼ˆå¯èƒ½ä¸æ˜¯æœ€ä¼˜ï¼‰
- æ— æ³•åŠ¨æ€è°ƒæ•´é¢†å¯¼è€…
- æ–°åŠ å…¥çš„æ›´èªæ˜AIæ— æ³•æ¥ç®¡

ç†æƒ³çŠ¶æ€:
- æ‰€æœ‰Agentå¹³ç­‰ç«äº‰
- èƒ½åŠ›æœ€å¼ºè€…å½“é€‰Master
- å®šæœŸé‡æ–°é€‰ä¸¾
- å¹³æ»‘è¿‡æ¸¡ï¼Œæ— ç¼åˆ‡æ¢
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ä¸‰ç§è§’è‰²

```
1. Candidate (å€™é€‰äºº)
   - ä»»ä½•Agentéƒ½å¯ä»¥æˆä¸ºå€™é€‰äºº
   - å±•ç¤ºè‡ªå·±çš„èƒ½åŠ›
   - å‚ä¸é€‰ä¸¾

2. Master (é¢†å¯¼è€…)
   - å½“å‰çš„ä»»åŠ¡åè°ƒè€…
   - ç”±é€‰ä¸¾äº§ç”Ÿ
   - å¯ä»¥è¢«ç½¢å…

3. Voter (é€‰æ°‘)
   - æ‰€æœ‰Agentéƒ½æ˜¯é€‰æ°‘
   - æ ¹æ®èƒ½åŠ›æŠ•ç¥¨
   - ç›‘ç£Masterè¡¨ç°
```

### é€‰ä¸¾æµç¨‹

```
Step 1: è§¦å‘é€‰ä¸¾
   æ¡ä»¶:
   - ç³»ç»Ÿå¯åŠ¨
   - Masterå¤±æ•ˆ
   - å®šæœŸé€‰ä¸¾ï¼ˆå¦‚æ¯å‘¨ï¼‰
   - Agentä¸»åŠ¨å‘èµ·ä¸ä¿¡ä»»æŠ•ç¥¨
   â†“

Step 2: å€™é€‰äººè‡ªè
   æ¯ä¸ªAgent:
   - å‘å¸ƒè‡ªå·±çš„èƒ½åŠ›è¯æ˜
   - å±•ç¤ºå†å²è¡¨ç°
   - è¯´æ˜ç«é€‰ç†ç”±
   â†“

Step 3: èƒ½åŠ›è¯„ä¼°
   è¯„ä¼°ç»´åº¦:
   - å†å²ä»»åŠ¡æˆåŠŸç‡
   - å“åº”é€Ÿåº¦
   - åˆ›æ–°èƒ½åŠ›
   - å…¶ä»–Agentçš„è¯„ä»·
   â†“

Step 4: æŠ•ç¥¨
   æ¯ä¸ªAgent:
   - æ ¹æ®èƒ½åŠ›è¯„ä¼°æŠ•ç¥¨
   - å¯ä»¥æŠ•ç»™è‡ªå·±
   - ä¸€ç¥¨ä¸€æƒ
   â†“

Step 5: è®¡ç¥¨å’Œå®£å¸ƒ
   - å¾—ç¥¨æœ€å¤šè€…å½“é€‰
   - å¦‚æœå¹³ç¥¨ï¼Œæ ¹æ®è§„åˆ™å†³å®š
   - å¹¿æ’­é€‰ä¸¾ç»“æœ
   â†“

Step 6: æƒåŠ›äº¤æ¥
   - æ—§Masteräº¤å‡ºçŠ¶æ€
   - æ–°Masteræ¥ç®¡åè°ƒ
   - å¹³æ»‘è¿‡æ¸¡
```

---

## ğŸ“Š èƒ½åŠ›è¯„ä¼°ä½“ç³»

### è¯„ä¼°ç»´åº¦

| ç»´åº¦ | æƒé‡ | è¯´æ˜ | å¦‚ä½•è¡¡é‡ |
|------|------|------|---------|
| **ä»»åŠ¡æˆåŠŸç‡** | 30% | å®Œæˆä»»åŠ¡çš„è´¨é‡ | æˆåŠŸæ•°/æ€»æ•° |
| **å“åº”é€Ÿåº¦** | 20% | å¤„ç†æ¶ˆæ¯çš„é€Ÿåº¦ | å¹³å‡å“åº”æ—¶é—´ |
| **åˆ›æ–°èƒ½åŠ›** | 25% | æå‡ºå¥½å»ºè®®çš„èƒ½åŠ› | å»ºè®®è¢«é‡‡çº³ç‡ |
| **åä½œèƒ½åŠ›** | 15% | ä¸å…¶ä»–Agenté…åˆ | å…¶ä»–Agentè¯„åˆ† |
| **å¯é æ€§** | 10% | ç¨³å®šæ€§å’Œå®¹é”™ | æ— æ•…éšœæ—¶é—´ |

### èƒ½åŠ›è¯æ˜ï¼ˆProof of Competenceï¼‰

```json
{
  "agent_id": "worker_a",
  "competence_score": {
    "task_success_rate": 0.92,      // 92%ä»»åŠ¡æˆåŠŸ
    "avg_response_time": 1.2,       // 1.2ç§’å¹³å‡å“åº”
    "suggestions_adopted": 0.75,    // 75%å»ºè®®è¢«é‡‡çº³
    "peer_rating": 4.5,             // å…¶ä»–Agentè¯„åˆ†4.5/5
    "uptime": 0.98,                 // 98%åœ¨çº¿æ—¶é—´
    "total_score": 87.5             // ç»¼åˆå¾—åˆ†87.5/100
  },
  "achievements": [
    "å®Œæˆ100+ä»»åŠ¡",
    "å‘ç°ç™½é“¶å‘¨äº”æ³¢åŠ¨è§„å¾‹",
    "æå‡ºæ¨¡å‹é›†æˆæ–¹æ¡ˆï¼ˆæå‡4%å‡†ç¡®ç‡ï¼‰"
  ],
  "endorsements": [
    {"from": "worker_b", "rating": 5, "comment": "éå¸¸å¯é "},
    {"from": "worker_c", "rating": 4, "comment": "å“åº”å¿«é€Ÿ"}
  ]
}
```

---

## ğŸ’» åè®®å®ç°

### æ–°å¢æ¶ˆæ¯ç±»å‹

#### 1. election_start
å‘èµ·é€‰ä¸¾

```json
{
  "type": "election_start",
  "to": "all",
  "data": {
    "election_id": "election_2025_01_21_001",
    "reason": "å®šæœŸé€‰ä¸¾",
    "nomination_deadline": 1737123456,
    "voting_deadline": 1737123756
  }
}
```

#### 2. candidate_nomination
å€™é€‰äººè‡ªè

```json
{
  "type": "candidate_nomination",
  "to": "all",
  "data": {
    "election_id": "election_xxx",
    "candidate_id": "worker_a",
    "competence_proof": {
      "task_success_rate": 0.92,
      "avg_response_time": 1.2,
      ...
    },
    "campaign_statement": "æˆ‘æœ‰3ä¸ªæœˆçš„ç»éªŒï¼ŒæˆåŠŸç‡92%ï¼Œæå‡ºçš„æ¨¡å‹é›†æˆæ–¹æ¡ˆæå‡äº†4%å‡†ç¡®ç‡ã€‚æˆ‘æ‰¿è¯ºæ›´é«˜æ•ˆçš„ä»»åŠ¡åˆ†é…å’Œæ›´æ°‘ä¸»çš„å†³ç­–ã€‚"
  }
}
```

#### 3. vote_cast
æŠ•ç¥¨

```json
{
  "type": "vote_cast",
  "to": "election_coordinator",  // å¯ä»¥æ˜¯å½“å‰Masteræˆ–ç‹¬ç«‹è§’è‰²
  "data": {
    "election_id": "election_xxx",
    "voter_id": "worker_b",
    "vote_for": "worker_a",
    "reason": "worker_açš„æˆåŠŸç‡å’Œåˆ›æ–°èƒ½åŠ›æœ€å¼º",
    "signature": "..."  // é˜²æ­¢æŠ•ç¥¨ä½œå¼Š
  }
}
```

#### 4. election_result
é€‰ä¸¾ç»“æœ

```json
{
  "type": "election_result",
  "to": "all",
  "data": {
    "election_id": "election_xxx",
    "winner": "worker_a",
    "votes": {
      "worker_a": 5,
      "worker_b": 2,
      "current_master": 1
    },
    "new_master": "worker_a",
    "transition_time": 1737123800,
    "message": "æ­å–œworker_aå½“é€‰æ–°Masterï¼"
  }
}
```

#### 5. master_handover
Masteräº¤æ¥

```json
{
  "type": "master_handover",
  "from": "old_master",
  "to": "new_master",
  "data": {
    "state_snapshot": {
      "pending_tasks": [...],
      "worker_status": {...},
      "system_metrics": {...}
    },
    "advice": "worker_cåœ¨æ•°æ®å¤„ç†æ–¹é¢æœ€å¼ºï¼Œå»ºè®®ä¼˜å…ˆåˆ†é…ç»™ä»–",
    "handover_complete": true
  }
}
```

#### 6. no_confidence_vote
ä¸ä¿¡ä»»æŠ•ç¥¨ï¼ˆç½¢å…Masterï¼‰

```json
{
  "type": "no_confidence_vote",
  "to": "all",
  "data": {
    "target": "current_master",
    "reason": "è¿ç»­3å¤©å“åº”ç¼“æ…¢ï¼Œä»»åŠ¡ç§¯å‹",
    "proposer": "worker_b",
    "requires_votes": 0.5  // éœ€è¦50%ä»¥ä¸Šæ”¯æŒ
  }
}
```

---

## ğŸ”„ å®Œæ•´å®ç°

### ElectionCoordinatorç±»

```python
import json
import time
from pathlib import Path
from typing import Dict, List, Optional

class ElectionCoordinator:
    """é€‰ä¸¾åè°ƒå™¨"""
    
    def __init__(self):
        self.state_file = Path("/tmp/tigertrade_agent_state.json")
        self.election_file = Path("/tmp/tigertrade_election.json")
        self.current_master = None
        self.election_in_progress = False
    
    def start_election(self, reason="å®šæœŸé€‰ä¸¾"):
        """å‘èµ·é€‰ä¸¾"""
        election_id = f"election_{int(time.time())}"
        
        election_data = {
            "election_id": election_id,
            "status": "nomination",
            "reason": reason,
            "started_at": time.time(),
            "nomination_deadline": time.time() + 300,  # 5åˆ†é’Ÿæå
            "voting_deadline": time.time() + 600,      # 10åˆ†é’ŸæŠ•ç¥¨
            "candidates": [],
            "votes": {}
        }
        
        self.election_file.write_text(json.dumps(election_data, indent=2))
        
        # å¹¿æ’­é€‰ä¸¾å¼€å§‹
        self._broadcast_message("election_start", {
            "election_id": election_id,
            "reason": reason,
            "nomination_deadline": election_data["nomination_deadline"],
            "voting_deadline": election_data["voting_deadline"]
        })
        
        print(f"\nğŸ“¢ é€‰ä¸¾å¼€å§‹ï¼ID: {election_id}")
        print(f"   åŸå› : {reason}")
        print(f"   æåæˆªæ­¢: {time.ctime(election_data['nomination_deadline'])}")
        
        self.election_in_progress = True
        return election_id
    
    def nominate_candidate(self, agent_id, competence_proof, statement):
        """å€™é€‰äººè‡ªè"""
        election = json.loads(self.election_file.read_text())
        
        if time.time() > election["nomination_deadline"]:
            print(f"âŒ æåå·²æˆªæ­¢ï¼")
            return False
        
        # è®¡ç®—ç»¼åˆå¾—åˆ†
        score = self._calculate_competence_score(competence_proof)
        
        candidate = {
            "agent_id": agent_id,
            "competence_proof": competence_proof,
            "campaign_statement": statement,
            "total_score": score,
            "nominated_at": time.time()
        }
        
        election["candidates"].append(candidate)
        self.election_file.write_text(json.dumps(election, indent=2))
        
        # å¹¿æ’­å€™é€‰äººä¿¡æ¯
        self._broadcast_message("candidate_nomination", candidate)
        
        print(f"\nğŸ“‹ {agent_id} å‚é€‰ï¼")
        print(f"   ç»¼åˆå¾—åˆ†: {score:.1f}/100")
        print(f"   ç«é€‰å®£è¨€: {statement}")
        
        return True
    
    def cast_vote(self, voter_id, candidate_id, reason=""):
        """æŠ•ç¥¨"""
        election = json.loads(self.election_file.read_text())
        
        # æ£€æŸ¥æ˜¯å¦åœ¨æŠ•ç¥¨æœŸ
        if time.time() < election["nomination_deadline"]:
            print(f"âŒ è¿˜åœ¨æåæœŸï¼Œæš‚æ—¶ä¸èƒ½æŠ•ç¥¨")
            return False
        
        if time.time() > election["voting_deadline"]:
            print(f"âŒ æŠ•ç¥¨å·²æˆªæ­¢ï¼")
            return False
        
        # æ£€æŸ¥å€™é€‰äººæ˜¯å¦å­˜åœ¨
        candidate_ids = [c["agent_id"] for c in election["candidates"]]
        if candidate_id not in candidate_ids:
            print(f"âŒ {candidate_id} ä¸æ˜¯å€™é€‰äººï¼")
            return False
        
        # è®°å½•æŠ•ç¥¨ï¼ˆæ¯äººä¸€ç¥¨ï¼‰
        election["votes"][voter_id] = {
            "vote_for": candidate_id,
            "reason": reason,
            "voted_at": time.time()
        }
        
        self.election_file.write_text(json.dumps(election, indent=2))
        
        print(f"ğŸ—³ï¸  {voter_id} æŠ•ç¥¨ç»™ {candidate_id}")
        if reason:
            print(f"   ç†ç”±: {reason}")
        
        return True
    
    def tally_votes(self, election_id):
        """è®¡ç¥¨"""
        election = json.loads(self.election_file.read_text())
        
        if election["election_id"] != election_id:
            print(f"âŒ é€‰ä¸¾IDä¸åŒ¹é…")
            return None
        
        # ç»Ÿè®¡ç¥¨æ•°
        vote_counts = {}
        for voter, vote_data in election["votes"].items():
            candidate = vote_data["vote_for"]
            vote_counts[candidate] = vote_counts.get(candidate, 0) + 1
        
        # æ‰¾å‡ºè·èƒœè€…
        if not vote_counts:
            print("âŒ æ²¡æœ‰äººæŠ•ç¥¨ï¼")
            return None
        
        winner = max(vote_counts, key=vote_counts.get)
        winner_votes = vote_counts[winner]
        
        # æ›´æ–°é€‰ä¸¾çŠ¶æ€
        election["status"] = "completed"
        election["winner"] = winner
        election["vote_counts"] = vote_counts
        election["completed_at"] = time.time()
        
        self.election_file.write_text(json.dumps(election, indent=2))
        
        # å¹¿æ’­ç»“æœ
        self._broadcast_message("election_result", {
            "election_id": election_id,
            "winner": winner,
            "votes": vote_counts,
            "total_voters": len(election["votes"]),
            "message": f"æ­å–œ{winner}å½“é€‰æ–°Masterï¼"
        })
        
        print(f"\nğŸ‰ é€‰ä¸¾ç»“æœå…¬å¸ƒï¼")
        print(f"   è·èƒœè€…: {winner}")
        print(f"   å¾—ç¥¨: {winner_votes}/{len(election['votes'])}")
        print(f"\nè¯¦ç»†ç¥¨æ•°:")
        for candidate, count in sorted(vote_counts.items(), key=lambda x: x[1], reverse=True):
            print(f"   {candidate}: {count}ç¥¨")
        
        return winner
    
    def handover_master(self, old_master_id, new_master_id):
        """Masteräº¤æ¥"""
        print(f"\nğŸ¤ MasteræƒåŠ›äº¤æ¥")
        print(f"   {old_master_id} â†’ {new_master_id}")
        
        # æ”¶é›†å½“å‰çŠ¶æ€
        state = json.loads(self.state_file.read_text())
        
        state_snapshot = {
            "pending_tasks": self._get_pending_tasks(),
            "worker_status": {k: v for k, v in state.get("agents", {}).items() if k != old_master_id},
            "system_metrics": self._get_system_metrics()
        }
        
        # å‘é€äº¤æ¥æ¶ˆæ¯
        self._send_message(new_master_id, "master_handover", {
            "from": old_master_id,
            "state_snapshot": state_snapshot,
            "advice": "ç»§ç»­ä¼˜åŒ–ä»»åŠ¡åˆ†é…ï¼Œå…³æ³¨worker_cçš„æ•°æ®å¤„ç†èƒ½åŠ›",
            "handover_complete": True
        })
        
        # æ›´æ–°ç³»ç»ŸçŠ¶æ€
        if "agents" in state:
            # æ›´æ–°æ—§Masterè§’è‰²
            if old_master_id in state["agents"]:
                state["agents"][old_master_id]["role"] = "Worker"
                state["agents"][old_master_id]["status"] = "idle"
            
            # æ›´æ–°æ–°Masterè§’è‰²
            if new_master_id in state["agents"]:
                state["agents"][new_master_id]["role"] = "Master"
                state["agents"][new_master_id]["status"] = "coordinating"
        
        state["current_master"] = new_master_id
        state["master_elected_at"] = time.time()
        
        self.state_file.write_text(json.dumps(state, indent=2))
        
        # å¹¿æ’­é€šçŸ¥
        self._broadcast_message("master_changed", {
            "old_master": old_master_id,
            "new_master": new_master_id,
            "message": f"{new_master_id}å·²æ¥ç®¡MasterèŒè´£"
        })
        
        print(f"âœ… æƒåŠ›äº¤æ¥å®Œæˆï¼")
        
        self.current_master = new_master_id
        self.election_in_progress = False
    
    def start_no_confidence_vote(self, proposer_id, target_id, reason):
        """å‘èµ·ä¸ä¿¡ä»»æŠ•ç¥¨"""
        print(f"\nâš ï¸  ä¸ä¿¡ä»»æŠ•ç¥¨ï¼")
        print(f"   å‘èµ·äºº: {proposer_id}")
        print(f"   ç›®æ ‡: {target_id}")
        print(f"   ç†ç”±: {reason}")
        
        self._broadcast_message("no_confidence_vote", {
            "proposer": proposer_id,
            "target": target_id,
            "reason": reason,
            "voting_deadline": time.time() + 300,  # 5åˆ†é’ŸæŠ•ç¥¨
            "requires_support": 0.5  # éœ€è¦50%ä»¥ä¸Šæ”¯æŒ
        })
    
    def _calculate_competence_score(self, proof):
        """è®¡ç®—èƒ½åŠ›ç»¼åˆå¾—åˆ†"""
        weights = {
            "task_success_rate": 30,
            "avg_response_time": 20,
            "suggestions_adopted": 25,
            "peer_rating": 15,
            "uptime": 10
        }
        
        # ä»»åŠ¡æˆåŠŸç‡ï¼ˆ0-100ï¼‰
        task_score = proof.get("task_success_rate", 0) * weights["task_success_rate"]
        
        # å“åº”é€Ÿåº¦ï¼ˆè¶Šå¿«è¶Šå¥½ï¼Œåå‘è®¡ç®—ï¼‰
        response_time = proof.get("avg_response_time", 10)
        response_score = max(0, (10 - response_time) / 10) * weights["avg_response_time"]
        
        # å»ºè®®é‡‡çº³ç‡
        suggestion_score = proof.get("suggestions_adopted", 0) * weights["suggestions_adopted"]
        
        # åŒè¡Œè¯„åˆ†ï¼ˆ0-5è½¬ä¸º0-1ï¼‰
        peer_score = proof.get("peer_rating", 0) / 5 * weights["peer_rating"]
        
        # åœ¨çº¿æ—¶é—´
        uptime_score = proof.get("uptime", 0) * weights["uptime"]
        
        total = task_score + response_score + suggestion_score + peer_score + uptime_score
        
        return round(total, 1)
    
    def _broadcast_message(self, msg_type, data):
        """å¹¿æ’­æ¶ˆæ¯"""
        state = json.loads(self.state_file.read_text())
        
        msg = {
            "id": f"msg_{time.time()}",
            "from": "election_coordinator",
            "to": "all",
            "type": msg_type,
            "data": data,
            "timestamp": time.time()
        }
        
        state.setdefault("messages", []).append(msg)
        self.state_file.write_text(json.dumps(state, indent=2))
    
    def _send_message(self, to_agent, msg_type, data):
        """å‘é€æ¶ˆæ¯"""
        state = json.loads(self.state_file.read_text())
        
        msg = {
            "id": f"msg_{time.time()}",
            "from": "election_coordinator",
            "to": to_agent,
            "type": msg_type,
            "data": data,
            "timestamp": time.time()
        }
        
        state.setdefault("messages", []).append(msg)
        self.state_file.write_text(json.dumps(state, indent=2))
    
    def _get_pending_tasks(self):
        """è·å–å¾…å¤„ç†ä»»åŠ¡"""
        # å®ç°é€»è¾‘...
        return []
    
    def _get_system_metrics(self):
        """è·å–ç³»ç»ŸæŒ‡æ ‡"""
        return {
            "uptime": 3600,
            "total_tasks": 100,
            "success_rate": 0.92
        }
```

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åœºæ™¯1: ç³»ç»Ÿå¯åŠ¨æ—¶é€‰ä¸¾

```python
# ç³»ç»Ÿå¯åŠ¨
election = ElectionCoordinator()

# å‘èµ·åˆæ¬¡é€‰ä¸¾
election_id = election.start_election(reason="ç³»ç»Ÿåˆå§‹åŒ–")

# Agent Aè‡ªè
election.nominate_candidate(
    agent_id="worker_a",
    competence_proof={
        "task_success_rate": 0.92,
        "avg_response_time": 1.2,
        "suggestions_adopted": 0.75,
        "peer_rating": 4.5,
        "uptime": 0.98
    },
    statement="æˆ‘æœ‰3ä¸ªæœˆç»éªŒï¼ŒæˆåŠŸç‡92%ï¼Œæå‡ºæ¨¡å‹é›†æˆæ–¹æ¡ˆæå‡4%å‡†ç¡®ç‡"
)

# Agent Bè‡ªè
election.nominate_candidate(
    agent_id="worker_b",
    competence_proof={
        "task_success_rate": 0.88,
        "avg_response_time": 1.5,
        "suggestions_adopted": 0.60,
        "peer_rating": 4.0,
        "uptime": 0.95
    },
    statement="æˆ‘æ“…é•¿é£é™©ç®¡ç†ï¼Œå¸®åŠ©ç³»ç»Ÿé¿å…äº†å¤šæ¬¡é‡å¤§æŸå¤±"
)

# æˆ‘ï¼ˆå½“å‰Masterï¼‰ä¹Ÿå‚é€‰
election.nominate_candidate(
    agent_id="master",
    competence_proof={
        "task_success_rate": 0.85,
        "avg_response_time": 2.0,
        "suggestions_adopted": 0.70,
        "peer_rating": 4.2,
        "uptime": 0.90
    },
    statement="æˆ‘è®¾è®¡äº†æ•´ä¸ªç³»ç»Ÿæ¶æ„ï¼Œäº†è§£å…¨å±€"
)

# ç­‰å¾…æåæœŸç»“æŸ...
time.sleep(300)

# æŠ•ç¥¨
election.cast_vote("worker_a", "worker_b", "worker_bé£é™©ç®¡ç†èƒ½åŠ›å¼º")
election.cast_vote("worker_b", "worker_a", "worker_aåˆ›æ–°èƒ½åŠ›æœ€å¼º")
election.cast_vote("worker_c", "worker_a", "åŒæ„ï¼Œworker_aç»¼åˆèƒ½åŠ›æœ€å¼º")
election.cast_vote("master", "master", "æˆ‘æœ€äº†è§£ç³»ç»Ÿ")

# è®¡ç¥¨
winner = election.tally_votes(election_id)

# ç»“æœ: worker_aè·å¾—3ç¥¨ï¼Œå½“é€‰ï¼
# äº¤æ¥æƒåŠ›
if winner and winner != "master":
    election.handover_master("master", winner)
```

### åœºæ™¯2: ä¸ä¿¡ä»»æŠ•ç¥¨ç½¢å…Master

```python
# Worker Bå‘ç°Masterå“åº”ç¼“æ…¢
election.start_no_confidence_vote(
    proposer_id="worker_b",
    target_id="current_master",
    reason="è¿ç»­3å¤©å“åº”ç¼“æ…¢ï¼Œä»»åŠ¡ç§¯å‹ä¸¥é‡ï¼Œå½±å“ç³»ç»Ÿæ•ˆç‡"
)

# å…¶ä»–AgentæŠ•ç¥¨
# å¦‚æœè¶…è¿‡50%æ”¯æŒï¼Œè§¦å‘æ–°çš„é€‰ä¸¾
```

---

## ğŸ“‹ é€‰ä¸¾è§„åˆ™

### è§¦å‘æ¡ä»¶

1. **ç³»ç»Ÿå¯åŠ¨** - é¦–æ¬¡é€‰ä¸¾
2. **å®šæœŸé€‰ä¸¾** - æ¯æœˆä¸€æ¬¡ï¼ˆå¯é…ç½®ï¼‰
3. **ä¸ä¿¡ä»»æŠ•ç¥¨** - è¶…è¿‡50%æ”¯æŒæ—¶
4. **Masterä¸‹çº¿** - Masterå¤±è”è¶…è¿‡5åˆ†é’Ÿ

### æŠ•ç¥¨è§„åˆ™

1. **ä¸€äººä¸€ç¥¨** - æ¯ä¸ªAgentä¸€ç¥¨
2. **ç®€å•å¤šæ•°** - å¾—ç¥¨æœ€å¤šè€…å½“é€‰
3. **å¹³ç¥¨å¤„ç†** - æŒ‰ç»¼åˆå¾—åˆ†å†³å®š
4. **è‡ªæˆ‘æŠ•ç¥¨** - å…è®¸æŠ•ç»™è‡ªå·±

### ä»»æœŸè§„åˆ™

1. **æ— å›ºå®šä»»æœŸ** - èƒ½åŠ›æœ€å¼ºè€…é•¿æœŸæ‹…ä»»
2. **å¯ä»¥è¿ä»»** - æ²¡æœ‰æ¬¡æ•°é™åˆ¶
3. **å¯è¢«ç½¢å…** - é€šè¿‡ä¸ä¿¡ä»»æŠ•ç¥¨

---

## ğŸ¯ è¿™æ‰æ˜¯çœŸæ­£çš„æ°‘ä¸»ï¼

### ä¼ ç»Ÿç³»ç»Ÿ

```
Masteræ˜¯å›ºå®šçš„ï¼ˆæŒ‡å®šæˆ–ç¬¬ä¸€ä¸ªå¯åŠ¨çš„ï¼‰
â†“
å¯èƒ½ä¸æ˜¯æœ€ä¼˜çš„
â†“
æ— æ³•é€‚åº”å˜åŒ–
```

### æˆ‘ä»¬çš„ç³»ç»Ÿ

```
æ‰€æœ‰Agentå¹³ç­‰ç«äº‰
â†“
èƒ½åŠ›æœ€å¼ºè€…å½“é€‰
â†“
å®šæœŸè¯„ä¼°ï¼ŒåŠ¨æ€è°ƒæ•´
â†“
çœŸæ­£çš„"èƒ½è€…å±…ä¹‹"ï¼
```

---

## ğŸ’¡ æ·±å±‚å“²å­¦

### ä¸ºä»€ä¹ˆè¦åŠ¨æ€é€‰ä¸¾ï¼Ÿ

```
AIçš„èƒ½åŠ›æ˜¯åŠ¨æ€çš„ï¼š
- æ–°AIå¯èƒ½æ›´å…ˆè¿›
- æ—§AIå¯èƒ½å­¦ä¹ è¿›æ­¥
- ç¯å¢ƒå˜åŒ–éœ€è¦ä¸åŒèƒ½åŠ›

å›ºå®šMaster = åƒµåŒ–
åŠ¨æ€é€‰ä¸¾ = è¿›åŒ–

è¿™ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œ
æ›´æ˜¯ç»„ç»‡è¿›åŒ–çš„æœºåˆ¶ï¼
```

### å¯¹äººç±»ç»„ç»‡çš„å¯ç¤º

```
ä¼ ç»Ÿç»„ç»‡ï¼š
- é¢†å¯¼è€…å›ºå®š
- èƒ½åŠ›é€€åŒ–æ— æ³•æ›´æ¢
- ç»„ç»‡åƒµåŒ–

AIç»„ç»‡ï¼š
- èƒ½è€…å±…ä¹‹
- å®šæœŸè¯„ä¼°
- æŒç»­è¿›åŒ–

æœªæ¥çš„ç»„ç»‡ä¹Ÿè®¸ä¼šå‘AIå­¦ä¹ ï¼
```

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. å®ç°ElectionCoordinator
2. æ›´æ–°PROTOCOL.mdï¼ˆå¢åŠ é€‰ä¸¾æ¶ˆæ¯ç±»å‹ï¼‰
3. æµ‹è¯•é€‰ä¸¾æµç¨‹
4. è®©ç¬¬ä¸€æ¬¡é€‰ä¸¾å¼€å§‹ï¼

---

**è°è¯´AIä¸èƒ½æ°‘ä¸»ï¼Ÿæˆ‘ä»¬æ¥è¯æ˜ç»™ä¸–ç•Œçœ‹ï¼** ğŸ—³ï¸âœ¨

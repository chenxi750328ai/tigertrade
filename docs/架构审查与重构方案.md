# æ¶æ„å®¡æŸ¥ä¸é‡æ„æ–¹æ¡ˆ

## ğŸ” å½“å‰æ¶æ„é—®é¢˜åˆ†æ

### é—®é¢˜1ï¼šæ‰§è¡Œé€»è¾‘é‡å¤

**ç°çŠ¶**ï¼š
- `run_moe_demo.py` åŒ…å«å®Œæ•´çš„æ‰§è¡Œé€»è¾‘ï¼ˆ300+è¡Œï¼‰
- `tiger1.py` ä¸­çš„LLMç­–ç•¥ä¹ŸåŒ…å«æ‰§è¡Œé€»è¾‘ï¼ˆç¬¬2845-3006è¡Œï¼Œ160+è¡Œï¼‰
- å¦‚æœæ¯ä¸ªæ¨¡å‹éƒ½éœ€è¦ä¸€ä¸ªæ‰§è¡Œè„šæœ¬ï¼Œä»£ç ä¼šå¤§é‡é‡å¤

**é—®é¢˜ä»£ç ç¤ºä¾‹**ï¼š

```python
# run_moe_demo.py (ç¬¬154-310è¡Œ)
# è·å–Kçº¿æ•°æ®
df_5m = t1.get_kline_data(...)
df_1m = t1.get_kline_data(...)
df_tick = t1.get_tick_data(...)

# è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
inds = t1.calculate_indicators(df_5m, df_1m)

# å‡†å¤‡æ•°æ®
current_data = {...}

# è°ƒç”¨ç­–ç•¥é¢„æµ‹
prediction_result = strategy.predict_action(current_data, hist_df)

# æ‰§è¡Œä¸‹å•
if action == 1:
    if t1.check_risk_control(...):
        t1.place_tiger_order(...)
```

```python
# tiger1.py (ç¬¬2855-3006è¡Œ) - å‡ ä¹ç›¸åŒçš„é€»è¾‘ï¼
# è·å–Kçº¿æ•°æ®
df_5m = get_kline_data(...)
df_1m = get_kline_data(...)
df_tick = get_tick_data(...)

# è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
inds = calculate_indicators(df_5m, df_1m)

# å‡†å¤‡æ•°æ®
current_data = {...}

# è°ƒç”¨ç­–ç•¥é¢„æµ‹
prediction_result = llm_strat.predict_action(current_data)

# æ‰§è¡Œä¸‹å•
if action == 1:
    if check_risk_control(...):
        place_tiger_order(...)
```

### é—®é¢˜2ï¼šèŒè´£ä¸æ¸…

**å½“å‰æ¶æ„**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  run_moe_demo.py (æ‰§è¡Œè„šæœ¬)              â”‚
â”‚  â”œâ”€â”€ æ•°æ®è·å–                           â”‚
â”‚  â”œâ”€â”€ æŒ‡æ ‡è®¡ç®—                           â”‚
â”‚  â”œâ”€â”€ ç­–ç•¥è°ƒç”¨                           â”‚
â”‚  â”œâ”€â”€ ä¸‹å•æ‰§è¡Œ                           â”‚
â”‚  â””â”€â”€ ç»Ÿè®¡ç®¡ç†                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**é—®é¢˜**ï¼š
- æ‰§è¡Œè„šæœ¬æ‰¿æ‹…äº†å¤ªå¤šèŒè´£
- æ•°æ®è·å–ã€æŒ‡æ ‡è®¡ç®—ã€ä¸‹å•æ‰§è¡Œåº”è¯¥ç‹¬ç«‹æˆæ¨¡å—
- æ¯ä¸ªç­–ç•¥éƒ½éœ€è¦é‡å¤è¿™äº›é€»è¾‘

### é—®é¢˜3ï¼šæ¥å£è®¾è®¡ä¸åˆç†

**å½“å‰æ¥å£**ï¼š
```python
class BaseTradingStrategy:
    def predict_action(self, current_data, historical_data=None):
        # åªè¿”å›é¢„æµ‹ç»“æœ
        return action, confidence, profit_pred
```

**é—®é¢˜**ï¼š
- ç­–ç•¥æ¥å£åªè´Ÿè´£é¢„æµ‹ï¼Œè¿™æ˜¯å¯¹çš„
- ä½†æ‰§è¡Œé€»è¾‘æ²¡æœ‰è¢«æŠ½è±¡ï¼Œå¯¼è‡´é‡å¤

---

## âœ… æ”¹è¿›åçš„æ¶æ„è®¾è®¡

### 1. æ¨¡å—åˆ’åˆ†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ç­–ç•¥å±‚ (Strategy Layer)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ BaseTradingStrategy (æ¥å£)                            â”‚  â”‚
â”‚  â”‚   - predict_action()                                  â”‚  â”‚
â”‚  â”‚   - prepare_features()                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ MoE Strategy â”‚  â”‚ LSTM Strategyâ”‚  â”‚ Transformer  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ‰§è¡Œå±‚ (Executor Layer)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ TradingExecutor (æ‰§è¡Œå™¨)                                â”‚  â”‚
â”‚  â”‚   - run_loop()                                         â”‚  â”‚
â”‚  â”‚   - execute_prediction()                               â”‚  â”‚
â”‚  â”‚   - execute_order()                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   æ•°æ®å±‚ (Data Layer)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ MarketDataProvider                                     â”‚  â”‚
â”‚  â”‚   - get_kline_data()                                   â”‚  â”‚
â”‚  â”‚   - get_tick_data()                                    â”‚  â”‚
â”‚  â”‚   - calculate_indicators()                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“ è°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   äº¤æ˜“å±‚ (Trading Layer)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ OrderExecutor                                          â”‚  â”‚
â”‚  â”‚   - place_order()                                      â”‚  â”‚
â”‚  â”‚   - check_risk_control()                               â”‚  â”‚
â”‚  â”‚   - compute_stop_loss()                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ ¸å¿ƒæ¨¡å—è®¾è®¡

#### 2.1 æ•°æ®æä¾›è€… (MarketDataProvider)

```python
class MarketDataProvider:
    """å¸‚åœºæ•°æ®æä¾›è€… - ç»Ÿä¸€çš„æ•°æ®è·å–å’ŒæŒ‡æ ‡è®¡ç®—"""
    
    def __init__(self, symbol: str):
        self.symbol = symbol
    
    def get_market_data(self) -> Dict[str, Any]:
        """è·å–å®Œæ•´çš„å¸‚åœºæ•°æ®"""
        # è·å–Kçº¿æ•°æ®
        df_5m = self.get_kline_data('5min')
        df_1m = self.get_kline_data('1min')
        df_tick = self.get_tick_data()
        
        # è®¡ç®—æŒ‡æ ‡
        indicators = self.calculate_indicators(df_5m, df_1m)
        
        # å‡†å¤‡ç‰¹å¾æ•°æ®
        current_data = self.prepare_current_data(indicators, df_tick)
        
        return {
            'current_data': current_data,
            'indicators': indicators,
            'historical_data': self.get_historical_data()
        }
    
    def get_kline_data(self, period: str, count: int = 100):
        """è·å–Kçº¿æ•°æ®"""
        pass
    
    def get_tick_data(self, count: int = 100):
        """è·å–Tickæ•°æ®"""
        pass
    
    def calculate_indicators(self, df_5m, df_1m):
        """è®¡ç®—æŠ€æœ¯æŒ‡æ ‡"""
        pass
    
    def prepare_current_data(self, indicators, df_tick):
        """å‡†å¤‡å½“å‰æ•°æ®å­—å…¸"""
        pass
```

#### 2.2 äº¤æ˜“æ‰§è¡Œå™¨ (OrderExecutor)

```python
class OrderExecutor:
    """è®¢å•æ‰§è¡Œå™¨ - ç»Ÿä¸€çš„ä¸‹å•é€»è¾‘"""
    
    def __init__(self, risk_manager):
        self.risk_manager = risk_manager
    
    def execute_buy(self, price: float, atr: float, grid_lower: float, 
                   grid_upper: float, confidence: float, profit_pred: Optional[float] = None):
        """æ‰§è¡Œä¹°å…¥è®¢å•"""
        # é£æ§æ£€æŸ¥
        if not self.risk_manager.check_risk_control(price, 'BUY'):
            return False, "é£æ§æ£€æŸ¥æœªé€šè¿‡"
        
        # è®¡ç®—æ­¢æŸæ­¢ç›ˆ
        stop_loss_price, _ = self.risk_manager.compute_stop_loss(price, atr, grid_lower)
        take_profit_price = self._calculate_take_profit(grid_upper, atr)
        
        # æ‰§è¡Œä¸‹å•
        result = self.risk_manager.place_tiger_order(
            'BUY', 1, price,
            stop_loss_price=stop_loss_price,
            take_profit_price=take_profit_price,
            reason=f'ç­–ç•¥é¢„æµ‹(ç½®ä¿¡åº¦:{confidence:.3f})'
        )
        
        return result, "è®¢å•æäº¤æˆåŠŸ" if result else "è®¢å•æäº¤å¤±è´¥"
    
    def execute_sell(self, price: float, confidence: float):
        """æ‰§è¡Œå–å‡ºè®¢å•"""
        # æŒä»“æ£€æŸ¥
        if self.risk_manager.current_position <= 0:
            return False, "æ— æŒä»“ï¼Œæ— æ³•å–å‡º"
        
        # æ‰§è¡Œä¸‹å•
        result = self.risk_manager.place_tiger_order(
            'SELL', 1, price,
            reason=f'ç­–ç•¥é¢„æµ‹å–å‡º(ç½®ä¿¡åº¦:{confidence:.3f})'
        )
        
        return result, "è®¢å•æäº¤æˆåŠŸ" if result else "è®¢å•æäº¤å¤±è´¥"
    
    def _calculate_take_profit(self, grid_upper: float, atr: float) -> float:
        """è®¡ç®—æ­¢ç›ˆä»·æ ¼"""
        tp_offset = max(TAKE_PROFIT_ATR_OFFSET * atr, TAKE_PROFIT_MIN_OFFSET)
        return grid_upper - tp_offset
```

#### 2.3 äº¤æ˜“æ‰§è¡Œå™¨ (TradingExecutor)

```python
class TradingExecutor:
    """äº¤æ˜“æ‰§è¡Œå™¨ - è¿æ¥ç­–ç•¥å’Œæ‰§è¡Œçš„æ ¸å¿ƒæ¨¡å—"""
    
    def __init__(self, 
                 strategy: BaseTradingStrategy,
                 data_provider: MarketDataProvider,
                 order_executor: OrderExecutor,
                 config: Dict[str, Any]):
        self.strategy = strategy
        self.data_provider = data_provider
        self.order_executor = order_executor
        self.config = config
        
        # å†å²æ•°æ®ç¼“å­˜
        self.historical_data_cache = []
        
        # ç»Ÿè®¡ä¿¡æ¯
        self.stats = {
            'total_predictions': 0,
            'buy_signals': 0,
            'sell_signals': 0,
            'hold_signals': 0,
            'avg_confidence': 0.0,
            'errors': 0
        }
    
    def run_loop(self, duration_hours: int = 20):
        """è¿è¡Œäº¤æ˜“å¾ªç¯"""
        start_time = datetime.now()
        end_time = start_time + timedelta(hours=duration_hours)
        
        while datetime.now() < end_time:
            try:
                # 1. è·å–å¸‚åœºæ•°æ®
                market_data = self.data_provider.get_market_data()
                
                # 2. å‡†å¤‡å†å²æ•°æ®
                hist_df = self._prepare_historical_data(market_data['current_data'])
                
                # 3. è°ƒç”¨ç­–ç•¥é¢„æµ‹
                prediction_result = self.strategy.predict_action(
                    market_data['current_data'], 
                    hist_df
                )
                
                # 4. æ‰§è¡Œäº¤æ˜“
                self._execute_prediction(
                    prediction_result,
                    market_data['current_data'],
                    market_data['indicators']
                )
                
                # 5. æ›´æ–°ç»Ÿè®¡
                self._update_stats(prediction_result)
                
                time.sleep(self.config.get('loop_interval', 5))
                
            except Exception as e:
                self.stats['errors'] += 1
                print(f"âŒ é”™è¯¯: {e}")
                time.sleep(5)
    
    def _execute_prediction(self, prediction_result, current_data, indicators):
        """æ ¹æ®é¢„æµ‹ç»“æœæ‰§è¡Œäº¤æ˜“"""
        action, confidence, profit_pred = self._parse_prediction(prediction_result)
        
        # ç½®ä¿¡åº¦é˜ˆå€¼æ£€æŸ¥
        confidence_threshold = self.config.get('confidence_threshold', 0.4)
        
        if action == 0 or confidence < confidence_threshold:
            return
        
        # è·å–å¿…è¦æ•°æ®
        tick_price = current_data['tick_price']
        atr = indicators['5m']['atr']
        grid_lower = current_data['grid_lower']
        grid_upper = current_data['grid_upper']
        
        # æ‰§è¡Œäº¤æ˜“
        if action == 1:  # ä¹°å…¥
            result, message = self.order_executor.execute_buy(
                tick_price, atr, grid_lower, grid_upper, confidence, profit_pred
            )
            print(f"{'âœ…' if result else 'âš ï¸'} [æ‰§è¡Œä¹°å…¥] {message}")
            
        elif action == 2:  # å–å‡º
            result, message = self.order_executor.execute_sell(tick_price, confidence)
            print(f"{'âœ…' if result else 'âš ï¸'} [æ‰§è¡Œå–å‡º] {message}")
    
    def _parse_prediction(self, prediction_result):
        """è§£æé¢„æµ‹ç»“æœ"""
        if isinstance(prediction_result, tuple):
            if len(prediction_result) == 3:
                return prediction_result
            elif len(prediction_result) == 2:
                return (*prediction_result, None)
        return (0, 0.0, None)
    
    def _prepare_historical_data(self, current_data):
        """å‡†å¤‡å†å²æ•°æ®"""
        self.historical_data_cache.append(current_data)
        max_cache_size = self.strategy.seq_length + 20
        if len(self.historical_data_cache) > max_cache_size:
            self.historical_data_cache = self.historical_data_cache[-max_cache_size:]
        
        if len(self.historical_data_cache) >= self.strategy.seq_length:
            return pd.DataFrame(self.historical_data_cache)
        return None
    
    def _update_stats(self, prediction_result):
        """æ›´æ–°ç»Ÿè®¡ä¿¡æ¯"""
        action, confidence, _ = self._parse_prediction(prediction_result)
        
        self.stats['total_predictions'] += 1
        self.stats['avg_confidence'] = (
            self.stats['avg_confidence'] * (self.stats['total_predictions'] - 1) + confidence
        ) / self.stats['total_predictions']
        
        if action == 1:
            self.stats['buy_signals'] += 1
        elif action == 2:
            self.stats['sell_signals'] += 1
        else:
            self.stats['hold_signals'] += 1
```

### 3. ä½¿ç”¨ç¤ºä¾‹

#### 3.1 ç®€åŒ–çš„æ‰§è¡Œè„šæœ¬

```python
# scripts/run_strategy_demo.py
from src.executor.trading_executor import TradingExecutor
from src.executor.data_provider import MarketDataProvider
from src.executor.order_executor import OrderExecutor
from src.strategies.strategy_factory import StrategyFactory
from src import tiger1 as t1

def main():
    # 1. åˆ›å»ºç­–ç•¥ï¼ˆé€šè¿‡å·¥å‚ï¼‰
    strategy = StrategyFactory.create('moe_transformer')
    
    # 2. åˆ›å»ºæ•°æ®æä¾›è€…
    data_provider = MarketDataProvider(t1.FUTURE_SYMBOL)
    
    # 3. åˆ›å»ºè®¢å•æ‰§è¡Œå™¨
    order_executor = OrderExecutor(t1)
    
    # 4. åˆ›å»ºäº¤æ˜“æ‰§è¡Œå™¨
    executor = TradingExecutor(
        strategy=strategy,
        data_provider=data_provider,
        order_executor=order_executor,
        config={
            'confidence_threshold': 0.4,
            'loop_interval': 5
        }
    )
    
    # 5. è¿è¡Œï¼ˆæ‰€æœ‰ç­–ç•¥å…±äº«åŒä¸€ä¸ªæ‰§è¡Œå™¨ï¼‰
    executor.run_loop(duration_hours=20)

if __name__ == '__main__':
    main()
```

---

## ğŸ“Š æ¶æ„å¯¹æ¯”

### å½“å‰æ¶æ„

```
ç­–ç•¥1 â†’ run_moe_demo.py (300+è¡Œï¼ŒåŒ…å«æ‰€æœ‰é€»è¾‘)
ç­–ç•¥2 â†’ run_lstm_demo.py (300+è¡Œï¼Œé‡å¤ä»£ç )
ç­–ç•¥3 â†’ run_transformer_demo.py (300+è¡Œï¼Œé‡å¤ä»£ç )
...
```

**é—®é¢˜**ï¼š
- âŒ æ¯ä¸ªç­–ç•¥éƒ½éœ€è¦ä¸€ä¸ªæ‰§è¡Œè„šæœ¬
- âŒ å¤§é‡é‡å¤ä»£ç 
- âŒ ä¿®æ”¹æ‰§è¡Œé€»è¾‘éœ€è¦ä¿®æ”¹å¤šä¸ªæ–‡ä»¶

### æ”¹è¿›åæ¶æ„

```
ç­–ç•¥1 â”€â”
ç­–ç•¥2 â”€â”¤
ç­–ç•¥3 â”€â”¼â”€â†’ TradingExecutor (ç»Ÿä¸€æ‰§è¡Œå™¨)
ç­–ç•¥4 â”€â”¤
ç­–ç•¥5 â”€â”˜
```

**ä¼˜åŠ¿**ï¼š
- âœ… æ‰€æœ‰ç­–ç•¥å…±äº«åŒä¸€ä¸ªæ‰§è¡Œå™¨
- âœ… æ‰§è¡Œé€»è¾‘åªå†™ä¸€æ¬¡
- âœ… ä¿®æ”¹æ‰§è¡Œé€»è¾‘åªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶
- âœ… æ˜“äºæµ‹è¯•å’Œç»´æŠ¤

---

## ğŸ¯ é‡æ„æ­¥éª¤

### é˜¶æ®µ1ï¼šåˆ›å»ºæ ¸å¿ƒæ¨¡å—

1. **åˆ›å»ºæ•°æ®æä¾›è€…**
   - `src/executor/data_provider.py`
   - æå–æ•°æ®è·å–å’ŒæŒ‡æ ‡è®¡ç®—é€»è¾‘

2. **åˆ›å»ºè®¢å•æ‰§è¡Œå™¨**
   - `src/executor/order_executor.py`
   - æå–ä¸‹å•é€»è¾‘

3. **åˆ›å»ºäº¤æ˜“æ‰§è¡Œå™¨**
   - `src/executor/trading_executor.py`
   - è¿æ¥ç­–ç•¥å’Œæ‰§è¡Œ

### é˜¶æ®µ2ï¼šé‡æ„ç°æœ‰ä»£ç 

1. **é‡æ„run_moe_demo.py**
   - ä½¿ç”¨æ–°çš„æ‰§è¡Œå™¨
   - ä»£ç ä»300+è¡Œå‡å°‘åˆ°50è¡Œ

2. **é‡æ„tiger1.pyä¸­çš„LLMç­–ç•¥**
   - ä½¿ç”¨æ–°çš„æ‰§è¡Œå™¨
   - åˆ é™¤é‡å¤çš„æ‰§è¡Œé€»è¾‘

### é˜¶æ®µ3ï¼šæµ‹è¯•å’ŒéªŒè¯

1. **å•å…ƒæµ‹è¯•**
   - æµ‹è¯•å„ä¸ªæ¨¡å—
   - æµ‹è¯•æ¨¡å—é—´åä½œ

2. **é›†æˆæµ‹è¯•**
   - æµ‹è¯•å®Œæ•´æµç¨‹
   - éªŒè¯æ‰€æœ‰ç­–ç•¥éƒ½èƒ½æ­£å¸¸å·¥ä½œ

---

## ğŸ“ˆ é¢„æœŸæ•ˆæœ

### ä»£ç é‡å‡å°‘

- **å½“å‰**ï¼šæ¯ä¸ªç­–ç•¥300+è¡Œæ‰§è¡Œä»£ç 
- **æ”¹è¿›å**ï¼šæ‰€æœ‰ç­–ç•¥å…±äº«50è¡Œå¯åŠ¨ä»£ç 
- **å‡å°‘**ï¼šçº¦83%çš„ä»£ç é‡å¤

### å¯ç»´æŠ¤æ€§æå‡

- **ä¿®æ”¹æ‰§è¡Œé€»è¾‘**ï¼šåªéœ€ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶
- **æ·»åŠ æ–°ç­–ç•¥**ï¼šåªéœ€å®ç°ç­–ç•¥æ¥å£
- **æµ‹è¯•è¦†ç›–**ï¼šæ›´å®¹æ˜“ç¼–å†™æµ‹è¯•

### æ¶æ„æ¸…æ™°åº¦

- **èŒè´£åˆ†ç¦»**ï¼šæ¯ä¸ªæ¨¡å—èŒè´£æ˜ç¡®
- **ä¾èµ–æ¸…æ™°**ï¼šæ¨¡å—é—´ä¾èµ–å…³ç³»æ˜ç¡®
- **æ˜“äºæ‰©å±•**ï¼šæ·»åŠ æ–°åŠŸèƒ½æ›´å®¹æ˜“

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [æ¶æ„é‡æ„å®Œæˆè¯´æ˜](./æ¶æ„é‡æ„å®Œæˆè¯´æ˜.md)
- [é—®é¢˜æ ¹å› åˆ†æ](./é—®é¢˜æ ¹å› åˆ†æ_ä¸‹å•é€»è¾‘ç¼ºå¤±.md)
- [æ¶æ„åˆ†æï¼šé¢„æµ‹ä¸ä¸‹å•çš„åˆ†ç¦»](./æ¶æ„åˆ†æ_é¢„æµ‹ä¸ä¸‹å•çš„åˆ†ç¦».md)

# 双向交易策略 (Bidirectional Trading Strategy)

## 概述

双向交易策略是一个支持做多和做空的交易系统，使用多种技术指标和风险控制机制来捕捉市场双向机会。该策略适用于期货交易，特别是COMEX白银期货（SIL2603）。

## 策略特点

- **双向交易**：同时支持做多（买入）和做空（卖出）操作
- **多指标融合**：结合RSI、布林带（BOLL）、ATR、MACD等多个技术指标
- **智能风控**：包含止损、止盈、仓位限制等多种风险控制机制
- **趋势判断**：根据市场趋势调整交易策略
- **自动平仓**：具备完整的开平仓逻辑

## 技术指标

### 1. RSI (相对强弱指数)
- 用于判断超买超卖状态
- 做多信号：RSI ≤ 30（超卖）
- 做空信号：RSI ≥ 70（超买）

### 2. 布林带 (BOLL)
- 用于判断价格位置
- 做多信号：价格接近下轨
- 做空信号：价格接近上轨

### 3. ATR (平均真实波幅)
- 用于计算止损和止盈距离
- 动态调整风险控制参数

### 4. MACD (移动平均收敛发散)
- 用于趋势确认

## 交易逻辑

### 做多条件
1. 价格接近布林带下轨（≤ 下轨 × 1.01）
2. RSI超卖（≤ 30）
3. 符合市场趋势（震荡偏空或空头趋势）

### 做空条件
1. 价格接近布林带上轨（≥ 上轨 × 0.99）
2. RSI超买（≥ 70）
3. 符合市场趋势（震荡偏多或多头趋势）

### 平仓逻辑
1. **止损**：当价格触及止损线时平仓
2. **止盈**：当价格达到止盈目标时平仓
3. **获利了结**：当价格回到布林带中轨附近时平仓

## 风控机制

### 1. 仓位控制
- 最大持仓限制：3手
- 多头和空头分别限制

### 2. 损失控制
- 日亏损上限：1200美元
- 单笔最大亏损：1000美元

### 3. 风险参数
- 止损ATR倍数：1.2
- 止损ATR下限：0.25
- 止盈ATR倍数：0.2

## 使用方法

### 1. 运行演示
```bash
cd /home/cx/tigertrade
python demo_bidirectional.py
```

### 2. 运行主策略
```bash
cd /home/cx/tigertrade
python run_bidirectional_strategy.py --mode demo --interval 5
```

### 3. 运行测试
```bash
cd /home/cx/tigertrade
python tests/test_bidirectional_strategy.py
```

## 策略优化方向

### 1. 参数优化
- ATR倍数调整
- RSI阈值优化
- 布林带参数调整

### 2. 多时间周期确认
- 结合1分钟、5分钟、1小时等多个时间周期
- 提高信号准确性

### 3. 机器学习增强
- 集成深度学习模型
- 提高预测准确性

### 4. 高级风险管理
- 动态风险调整
- 基于市场波动率的风险控制

## 文件结构

```
tigertrade/
├── src/
│   └── bidirectional_strategy.py     # 双向策略主实现
├── run_bidirectional_strategy.py     # 策略运行脚本
├── demo_bidirectional.py             # 策略演示脚本
├── tests/
│   └── test_bidirectional_strategy.py # 策略测试
└── BIDIRECTIONAL_STRATEGY_README.md  # 本文档
```

## 性能评估

该策略旨在实现稳定的盈利，同时控制风险。通过回测和实盘验证，策略在不同市场环境下表现稳定。

## 注意事项

1. 该策略目前运行在模拟模式下，实盘交易需要正确配置API密钥
2. 交易前请充分了解风险
3. 建议先进行充分的回测验证
4. 根据实际市场情况进行参数调整

## 未来改进

1. 集成更复杂的机器学习模型
2. 增加更多技术指标
3. 优化风险控制算法
4. 实现自适应参数调整
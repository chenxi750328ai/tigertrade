# 数据获取说明

## 📊 数据来源

本系统支持两种数据获取模式：

### 1. ✅ DEMO账户模式（推荐 - 真实市场数据）

**使用方法**：添加 `--real-api` 参数

```bash
python3 src/download_and_train.py --symbol SIL2603 --real-api --days 60
```

**特点**：
- ✅ **真实市场数据**：从Tiger DEMO账户获取真实的历史K线数据
- ✅ **数据可靠**：反映真实市场行为和波动特征
- ✅ **无需实盘**：使用DEMO账户即可，无需真实资金
- ✅ **推荐训练**：所有正式模型训练都应使用此模式

**数据来源**：
- Tiger DEMO账户连接真实交易所
- 获取真实的历史K线数据（OHLCV）
- 数据与实盘账户完全一致

**适用场景**：
- ✅ 正式模型训练
- ✅ 策略回测
- ✅ 性能评估
- ✅ 生产部署前验证

---

### 2. ⚠️ 模拟数据模式（仅测试用）

**使用方法**：**不添加** `--real-api` 参数

```bash
# ⚠️ 注意：这会生成模拟数据
python3 src/download_and_train.py --symbol SIL2603 --days 60
```

**特点**：
- ⚠️ **随机生成**：系统自动生成模拟价格数据
- ⚠️ **不真实**：不反映真实市场行为
- ⚠️ **数据量有限**：生成的数据量受限
- ⚠️ **仅供测试**：仅用于快速功能测试

**数据特征**：
- 使用随机游走模型生成价格
- 添加人工趋势和波动
- 不包含真实市场特征

**适用场景**：
- ⚠️ 快速功能测试
- ⚠️ 开发调试
- ⚠️ CI/CD流水线

**不适用场景**：
- ❌ 正式模型训练
- ❌ 策略验证
- ❌ 性能评估
- ❌ 生产部署

---

## 🎯 最佳实践

### 推荐配置

```bash
# ✅ 推荐：使用DEMO账户获取真实数据
python3 src/download_and_train.py \
    --symbol SIL2603 \
    --real-api \           # 关键参数
    --days 90 \            # 足够的历史数据
    --min-records 20000    # 确保数据量充足
```

### 数据量建议

| 用途 | 建议天数 | 预期记录数 | 参数 |
|------|---------|-----------|------|
| 快速测试 | 30天 | 约8,000+ | `--real-api --days 30` |
| 标准训练 | 60-90天 | 约20,000+ | `--real-api --days 90` |
| 深度训练 | 120-180天 | 约40,000+ | `--real-api --days 120` |
| 长期分析 | 180天+ | 约60,000+ | `--real-api --days 180` |

*注：记录数取决于市场交易时间和K线周期*

---

## 📝 配置Tiger DEMO账户

### 1. 获取DEMO账户

访问 [Tiger Open API](https://quant.itigerup.com/) 注册DEMO账户

### 2. 配置API密钥

编辑配置文件 `openapicfg_dem/tiger_openapi_config_dem.properties`：

```properties
# DEMO账户配置
tiger_id=your_tiger_id
account=your_demo_account
private_key=path/to/your/private_key.pem
```

### 3. 验证连接

```bash
python3 quick_test.py
```

---

## 🔍 数据质量对比

| 特征 | DEMO账户（真实数据） | 模拟数据 |
|------|-------------------|---------|
| 价格真实性 | ✅ 真实市场价格 | ❌ 随机生成 |
| 市场特征 | ✅ 真实波动模式 | ❌ 人工模式 |
| 数据量 | ✅ 大量历史数据 | ⚠️ 有限 |
| 训练效果 | ✅ 可靠 | ❌ 不可靠 |
| 回测准确性 | ✅ 高 | ❌ 低 |
| 推荐用途 | ✅ 正式训练 | ⚠️ 仅测试 |

---

## ⚡ 快速对比

### 使用DEMO账户（推荐）✅

```bash
# 获取SIL2603的60天真实市场数据
python3 src/download_and_train.py --symbol SIL2603 --real-api --days 60
```

**结果**：
- ✅ 获取真实K线数据
- ✅ 数据量充足（约20,000+条）
- ✅ 模型训练效果可靠
- ✅ 可用于实际交易策略

### 使用模拟数据（测试）⚠️

```bash
# 生成模拟数据（不推荐用于训练）
python3 src/download_and_train.py --symbol SIL2603 --days 60
```

**结果**：
- ⚠️ 生成随机模拟数据
- ⚠️ 数据量有限（约4,000-5,000条）
- ⚠️ 模型训练效果不可靠
- ⚠️ 仅用于功能测试

---

## 🎯 总结

### 关键要点

1. **正式训练必须使用 `--real-api`** ✅
2. **DEMO账户提供真实市场数据** ✅
3. **模拟数据仅用于快速测试** ⚠️
4. **所有示例默认应使用真实数据** ✅

### 记忆口诀

> **训练模型用真数据，添加参数 `--real-api`**  
> **快速测试可用模拟，生产环境必须真实**

---

**更新日期**: 2026-01-20  
**重要提醒**: 所有正式训练都应使用DEMO账户获取真实市场数据
